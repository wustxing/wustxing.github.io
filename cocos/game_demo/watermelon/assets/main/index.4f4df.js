window.__require=function t(e,i,n){function o(a,s){if(!i[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){return o(e[a][1][t]||t)},u,u.exports,t,e,i,n)}return i[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({BaseListItem:[function(t,e,i){"use strict";cc._RF.push(e,"db62eDahshGd7Mj2+lj5H1S","BaseListItem");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=null,e.index=0,e}return o(e,t),e.prototype.start=function(){},e.prototype.updateItem=function(){console.error("\u6ca1\u6709\u5b9e\u73b0updateItem\u65b9\u6cd5")},r([s],e)}(cc.Component));i.default=c,cc._RF.pop()},{}],BaseListView:[function(t,e,i){"use strict";cc._RF.push(e,"5dd4bEVSGlAF7ylI5ZFun+u","BaseListView");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./BaseView"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrData=null,e.listV=null,e}return o(e,t),e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.updateUI=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.onListRender=function(){},r([c],e)}(a.default));i.default=l,cc._RF.pop()},{"./BaseView":"BaseView"}],BaseUrl:[function(t,e,i){"use strict";cc._RF.push(e,"658fckeJuJKXafig05UbpDr","BaseUrl");var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},r=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(i,"__esModule",{value:!0}),i.requestClass=void 0;var a=t("../app"),s=t("../gameEnum");i.requestClass=function(t){var e=cc._RF.peek().script;cc.js.setClassName(e,t)};var c=function(){function t(){this.success_callback=null,this.fail_callback=null,this._urlData=null,this.url=""}return t.instance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;return i._instance||(i._instance=new(i.bind.apply(i,r([void 0],t)))),i._instance},t.prototype.send=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.post=function(t){return n(this,void 0,void 0,function(){var e,i,n=this;return o(this,function(o){switch(o.label){case 0:return this._urlData=t,e=null,i=setTimeout(function(){console.log("\u5b9a\u65f6\u5668"),a.default.eventObj.showWait()},500),[4,a.default.http.asyncPost(this.url,t).then(function(t){e=n.autoData(t.resp,!0)}).catch(function(t){e=n.autoData(t,!1)})];case 1:return o.sent(),clearTimeout(i),a.default.eventObj.hideWait(),e.status?this.success(e.data,e.obj):this.fail(e.data,e.msg),[2]}})})},t.prototype.autoData=function(t,e){void 0===e&&(e=!0);var i={status:!1,data:null,obj:null,msg:null};return 1==e?(i.status=!0,i.data=t,i.obj=t.data,"success"==t.status?(i.status=!0,i.data=t,i.obj=t.data):(i.status=!1,i.data=t,i.msg=t.message)):(i.status=!1,i.data=t,i.msg=t.message),i},t.prototype.autoResponse=function(t){var e=this.autoData(t,!0);e.status?this.success(e.data,e.obj):this.fail(e.data,e.msg)},t.prototype.get=function(t){return n(this,void 0,void 0,function(){var e,i,n=this;return o(this,function(o){switch(o.label){case 0:return this._urlData=t,e=null,i=setTimeout(function(){a.default.eventObj.showWait()},500),t&&0!=Object.keys(t).length&&(console.warn(t),-1==this.url.indexOf("?")&&(this.url+="?"),this.url+=a.default.common.paramObjToString(t)),[4,a.default.http.asyncGet(this.url).then(function(t){e=n.autoData(t.resp,!0)}).catch(function(t){e=n.autoData(t,!1)})];case 1:return o.sent(),clearTimeout(i),a.default.eventObj.hideWait(),e.status?this.success(e.data,e.obj):this.fail(e.data,e.msg),[2]}})})},t.prototype.success=function(t,e){void 0===e&&(e=null),this.url.indexOf("api/index/ping")>=0||(console.log(this.url),console.log("[BASEURL-LOG]",t)),this.success_callback&&(this.success_callback(e),this.success_callback=null)},t.prototype.fail=function(t){console.warn(this.url),console.warn("[BASEURL-ERROR]",t);var e=t.code;switch(e){case 1401:break;case 2007:a.default.eventObj.openView(s.default.view.MsgView,s.default.layer.WINDOW_LAYER,t.message);break;default:if(e>=1e4&&e<2e4){a.default.eventObj.openView(s.default.view.AlertView,s.default.layer.WINDOW_LAYER,t.message);break}console.warn("\u672a\u77e5\u9519\u8bef["+e+"]",t)}},t}();i.default=c,cc._RF.pop()},{"../app":"app","../gameEnum":"gameEnum"}],BaseView:[function(t,e,i){"use strict";cc._RF.push(e,"bfe9ajDgnxJMaHvhl25qS1Q","BaseView");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../app"),s=t("../gameEnum"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.view_name=s.default.view.NODE,e.arr_btn=[],e.arr_event=[],e.effectType=s.default.viewEffect.NORMAL,e.btnBack=null,e.c_startTime=0,e.c_endTime=0,e.url="",e.rurl="",e.clicktime=0,e}return o(e,t),e.prototype.closeView=function(){a.default.uiMgr.hide(this.view_name)},e.prototype.showView=function(t){void 0===t&&(t=s.default.layer.WINDOW_LAYER);for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];a.default.event.emit(a.default.eName.OPEN_VIEW,this.view_name,t,e)},e.prototype.show=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.view_name=e[0],console.log(this.view_name," is show"),this.showEffect(),this.arr_btn.forEach(function(e){e.on(cc.Node.EventType.TOUCH_END,t.click,t)});var n=this.node.getChildByName("btn_back");n&&n.on(cc.Node.EventType.TOUCH_END,this._click,this);var o=this.node.getChildByName("btn_null");o&&o.on(cc.Node.EventType.TOUCH_END,this._click,this),this.btnBack&&this.btnBack.on(cc.Node.EventType.TOUCH_END,this._click,this),this.arr_event.forEach(function(e){a.default.event.on(e.name,e.func,e.target?e.target:t)}),this.c_startTime=a.default.date.getTime()},e.prototype.hide=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.arr_btn.forEach(function(e){e.off(cc.Node.EventType.TOUCH_END,t.click,t)}),a.default.event.offAll(this);var n=this.node.getChildByName("btn_back");n&&n.off(cc.Node.EventType.TOUCH_END,this._click,this);var o=this.node.getChildByName("btn_null");o&&o.off(cc.Node.EventType.TOUCH_END,this._click,this),this.btnBack&&this.btnBack.off(cc.Node.EventType.TOUCH_END,this._click,this),this.c_endTime=a.default.date.getTime()},e.prototype.off=function(){var t=this;this.arr_btn.forEach(function(e){e.off(cc.Node.EventType.TOUCH_END,t.click,t)}),a.default.event.offAll(this)},e.prototype.click=function(){},e.prototype._click=function(t){var e=this.node.getChildByName("btn_back");switch(this.node.getChildByName("btn_null"),t.currentTarget){case this.btnBack:this.closeView();break;case e:a.default.uiMgr.hide(this.view_name)}},e.prototype.hideEffect=function(t){switch(console.log("hideEffect",this.view_name),this.effectType){case s.default.viewEffect.BG_SCALE:if(!(e=this.node.getChildByName("view")))return void t();e.scale=1,e.opacity=255,cc.tween(e).to(.1,{scale:1.3,opacity:0},{easing:cc.easing.smooth}).call(function(){e.scale=1,e.opacity=255,t()}).start();break;case s.default.viewEffect.WIDGET_BUTTOM_SHOW:if(!(e=this.node.getChildByName("view")))return void t();if(!(i=e.getComponent(cc.Widget)))return void t();i.bottom=0,cc.tween(i).to(.1,{bottom:-500},{easing:cc.easing.smooth}).call(function(){i.bottom=0,t()}).start();break;case s.default.viewEffect.WIDGET_LEFT_SHOW:var e,i;if(!(e=this.node.getChildByName("view")))return void t();if(!(i=e.getComponent(cc.Widget)))return void t();i.left=0,cc.tween(i).to(.1,{left:-500},{easing:cc.easing.smooth}).call(function(){i.left=0,t()}).start();break;default:t()}},e.prototype.showEffect=function(){switch(this.effectType){case s.default.viewEffect.BG_SCALE:if(!(e=this.node.getChildByName("view")))return;e.scale=1.5,cc.tween(e).to(.2,{scale:1},{easing:cc.easing.expoOut}).start();break;case s.default.viewEffect.BG_SCALE1:if(!(e=this.node.getChildByName("view")))return;e.scale=.7,cc.tween(e).to(.1,{scale:1}).start();break;case s.default.viewEffect.WIDGET_BUTTOM_SHOW:if(!(e=this.node.getChildByName("view")))return;if(!(t=e.getComponent(cc.Widget)))return;t.bottom=-500,cc.tween(t).to(1.6,{bottom:0},{easing:cc.easing.quintOut}).start();break;case s.default.viewEffect.WIDGET_LEFT_SHOW:var t;if(!(e=this.node.getChildByName("view")))return;if(!(t=e.getComponent(cc.Widget)))return;t.left=-500,cc.tween(t).to(.1,{left:0},{easing:cc.easing.quadOut}).start();break;case s.default.viewEffect.FADE_OUT:var e;if(!(e=this.node.getChildByName("view")))return;e.opacity=0,e.active=!0,e.stopAllActions(),e.runAction(cc.fadeIn(.15));break;case s.default.viewEffect.NORMAL:default:this.node.scale=1}},r([u({type:cc.Enum(s.default.viewEffect),displayName:"\u5f39\u51fa\u6548\u679c",tooltip:"NORMAL:\u7f29\u5c0f\u653e\u5927\u7279\u6548;BUTTON_SHOW:\u4ece\u4e0b\u65b9\u5f39\u51fa"})],e.prototype,"effectType",void 0),r([l],e)}(cc.Component);i.default=p,cc._RF.pop()},{"../app":"app","../gameEnum":"gameEnum"}],Data:[function(t,e,i){"use strict";cc._RF.push(e,"d9ec6AE34xMfKX/DqK1XDN3","Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./core/app"),o=function(){function t(){}return t.getRandLevel=function(){var t=0;return this.level<3?t=n.default.rand.limitInteger(0,2):this.level<=9&&(t=n.default.rand.limitInteger(this.level-3,this.level)),t},t.level=0,t}();i.default=o,cc._RF.pop()},{"./core/app":"app"}],Fruit:[function(t,e,i){"use strict";cc._RF.push(e,"872ecoE8jdGP5vvaFBqfgFl","Fruit");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./HomeView"),s=t("./core/app"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCollided=!1,e.imgFruit=null,e.arrFruit=[],e.physic=null,e.rigidBody=null,e}var i;return o(e,t),i=e,e.prototype.onBeginContact=function(t,e,n){if(!("Fruit"!=e.node.name||"Fruit"!=n.node.name||e.tag!=n.tag||e.tag>=9)){var o=e.node.getComponent(i),r=n.node.getComponent(i);o.isCollided=!0,r.isCollided=!0,e.node.y<n.node.y?(n.node.destroy(),s.default.event.emit(a.default.event_effect,this.node.x,this.node.y,e.tag),this.changeType(e.tag+1)):this.node.destroy()}},e.prototype.changeType=function(t){void 0===t&&(t=1),t=this.checkType(t),this.imgFruit.spriteFrame=this.arrFruit[t],this.physic.tag=t,this.physic.radius=this.node.width/2,this.physic.apply(),this.isCollided=!1},e.prototype.checkType=function(t){return t<0?0:t>9?9:t},e.prototype.apply=function(){this.rigidBody.applyAngularImpulse(3e3,!0)},r([u(cc.Sprite)],e.prototype,"imgFruit",void 0),r([u([cc.SpriteFrame])],e.prototype,"arrFruit",void 0),r([u(cc.PhysicsCircleCollider)],e.prototype,"physic",void 0),r([u(cc.RigidBody)],e.prototype,"rigidBody",void 0),i=r([l],e)}(cc.Component);i.default=p,cc._RF.pop()},{"./HomeView":"HomeView","./core/app":"app"}],HomeView:[function(t,e,i){"use strict";cc._RF.push(e,"3ea97VWY5pOtI4Y22NGNU8U","HomeView");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},a=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c,l=t("./Data"),u=t("./Fruit"),p=t("./core/app"),h=t("./core/base/BaseView"),d=t("./core/gameEnum"),f=cc._decorator,_=f.ccclass,y=f.property;(function(t){t[t.start=0]="start",t[t.gaming=1]="gaming",t[t.over=2]="over"})(c||(c={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pre_fruit=null,e.pre_water=null,e.deadLine=null,e.nodeRoot=null,e._gameState=c.gaming,e}var i;return o(e,t),i=e,e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,this.deadLine.active=!1,cc.tween(this.deadLine).repeatForever(cc.tween(this.deadLine).to(.3,{opacity:0}).to(.3,{opacity:255})).start()},e.prototype.start=function(){this.show(d.default.view.HomeScene)},e.prototype.show=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.arr_event=[{name:i.event_effect,func:this.showWaterEffect}],t.prototype.show.apply(this,e),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.click=function(t){switch(t.target){case this.node:var e=p.default.pool.getNode(this.pre_fruit),i=e.getComponent(u.default);i.changeType(l.default.getRandLevel()),i.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,i.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,-300),e.parent=this.nodeRoot,i.apply()}},e.prototype.onTouchEnd=function(t){console.error(t.getLocationX());var e=p.default.pool.getNode(this.pre_fruit);e.x=t.getLocationX()-375;var i=e.getComponent(u.default);i.changeType(l.default.getRandLevel()),i.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,i.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,-300),e.parent=this.nodeRoot,i.apply()},e.prototype.update=function(){for(var t=!1,e=0,i=this.nodeRoot.getComponentsInChildren(u.default);e<i.length;e++){var n=i[e];if(n.node.y>=this.deadLine.y-n.node.height/2&&(t=!0),n.node.y>=this.deadLine.y)break}this.deadLine.active=t},e.prototype.showWaterEffect=function(t,e,i){return a(this,void 0,void 0,function(){var n,o;return s(this,function(r){switch(r.label){case 0:return n=[(new cc.Color).fromHEX("#862274"),(new cc.Color).fromHEX("#ff0925"),(new cc.Color).fromHEX("#ff8e1c"),(new cc.Color).fromHEX("#ffe614"),(new cc.Color).fromHEX("#6de42e"),(new cc.Color).fromHEX("#e61933"),(new cc.Color).fromHEX("#fab36d"),(new cc.Color).fromHEX("#ffe350"),(new cc.Color).fromHEX("#fffaea"),(new cc.Color).fromHEX("#fc7b97"),(new cc.Color).fromHEX("#52d135")],(o=p.default.pool.getNode(this.pre_water)).x=t,o.y=e,o.color=n[i],this.node.addChild(o),[4,p.default.promise.sleep(.2)];case 1:return r.sent(),p.default.pool.setNode(o),[2]}})})},e.event_effect=Symbol(),r([y(cc.Prefab)],e.prototype,"pre_fruit",void 0),r([y(cc.Prefab)],e.prototype,"pre_water",void 0),r([y(cc.Node)],e.prototype,"deadLine",void 0),r([y(cc.Node)],e.prototype,"nodeRoot",void 0),i=r([_],e)}(h.default);i.default=m,cc._RF.pop()},{"./Data":"Data","./Fruit":"Fruit","./core/app":"app","./core/base/BaseView":"BaseView","./core/gameEnum":"gameEnum"}],ListItem:[function(t,e,i){"use strict";cc._RF.push(e,"61fc8e7KzVD0qO+8UIEv32q","ListItem");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a,s=cc._decorator,c=s.ccclass,l=s.property,u=s.disallowMultiple,p=s.menu,h=s.executionOrder;(function(t){t[t.NONE=0]="NONE",t[t.TOGGLE=1]="TOGGLE",t[t.SWITCH=2]="SWITCH"})(a||(a={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.title=null,e.selectedMode=a.NONE,e.selectedFlag=null,e.selectedSpriteFrame=null,e._unselectedSpriteFrame=null,e.adaptiveSize=!1,e._selected=!1,e._eventReg=!1,e}return o(e,t),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){if(this._selected=t,this.selectedFlag)switch(this.selectedMode){case a.TOGGLE:this.selectedFlag.active=t;break;case a.SWITCH:var e=this.selectedFlag.getComponent(cc.Sprite);e&&(e.spriteFrame=t?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"btnCom",{get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){if(this.selectedMode==a.SWITCH){var t=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=t.spriteFrame}},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},e.prototype._registerEvent=function(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},e.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node)},e.prototype.createEvt=function(t,e,i){if(void 0===i&&(i=null),t.isValid){t.comName=t.comName||t.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var n=new cc.Component.EventHandler;return n.target=i||t.node,n.component=t.comName,n.handler=e,n}},e.prototype.showAni=function(t,e,i){var n,o=this;switch(t){case 0:n=[cc.scaleTo(.2,.7),cc.moveBy(.3,0,2*this.node.height)];break;case 1:n=[cc.scaleTo(.2,.7),cc.moveBy(.3,2*this.node.width,0)];break;case 2:n=[cc.scaleTo(.2,.7),cc.moveBy(.3,0,-2*this.node.height)];break;case 3:n=[cc.scaleTo(.2,.7),cc.moveBy(.3,-2*this.node.width,0)];break;default:n=[cc.scaleTo(.3,.1)]}(e||i)&&n.push(cc.callFunc(function(){if(i){o.list._delSingleItem(o.node);for(var t=o.list.displayData.length-1;t>=0;t--)if(o.list.displayData[t].id==o.listId){o.list.displayData.splice(t,1);break}}e()})),this.node.runAction(cc.sequence(n))},e.prototype.onClickThis=function(){this.list.selectedId=this.listId},r([l({type:cc.Sprite,tooltip:!1})],e.prototype,"icon",void 0),r([l({type:cc.Node,tooltip:!1})],e.prototype,"title",void 0),r([l({type:cc.Enum(a),tooltip:!1})],e.prototype,"selectedMode",void 0),r([l({type:cc.Node,tooltip:!1,visible:function(){return this.selectedMode>a.NONE}})],e.prototype,"selectedFlag",void 0),r([l({type:cc.SpriteFrame,tooltip:!1,visible:function(){return this.selectedMode==a.SWITCH}})],e.prototype,"selectedSpriteFrame",void 0),r([l({tooltip:!1})],e.prototype,"adaptiveSize",void 0),r([c,u(),p("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/\u865a\u62df\u5217\u8868/listItem"),h(-5001)],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],List:[function(t,e,i){"use strict";cc._RF.push(e,"b5fc1DkRxNI/LyWvQ1BnWpP","List");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a,s,c,l=t("./ListItem"),u=cc._decorator,p=u.ccclass,h=u.property,d=u.disallowMultiple,f=u.menu,_=u.executionOrder,y=u.requireComponent;(function(t){t[t.NODE=1]="NODE",t[t.PREFAB=2]="PREFAB"})(a||(a={})),function(t){t[t.NORMAL=1]="NORMAL",t[t.ADHERING=2]="ADHERING",t[t.PAGE=3]="PAGE"}(s||(s={})),function(t){t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULT=2]="MULT"}(c||(c={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.templateType=a.NODE,e.tmpNode=null,e.tmpPrefab=null,e._slideMode=s.NORMAL,e.pageDistance=.3,e.pageChangeEvent=new cc.Component.EventHandler,e._virtual=!0,e.cyclic=!1,e.lackCenter=!1,e.lackSlide=!1,e._updateRate=0,e.frameByFrameRenderNum=0,e.renderEvent=new cc.Component.EventHandler,e.selectedMode=c.NONE,e.repeatEventSingle=!1,e.selectedEvent=null,e._selectedId=-1,e._forceUpdate=!1,e._updateDone=!0,e._numItems=0,e._inited=!1,e._needUpdateWidget=!1,e._aniDelRuning=!1,e._doneAfterUpdate=!1,e.adhering=!1,e._adheringBarrier=!1,e.curPageNum=0,e}return o(e,t),Object.defineProperty(e.prototype,"slideMode",{get:function(){return this._slideMode},set:function(t){this._slideMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"virtual",{get:function(){return this._virtual},set:function(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateRate",{get:function(){return this._updateRate},set:function(t){t>=0&&t<=6&&(this._updateRate=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectedId",{get:function(){return this._selectedId},set:function(t){var e,i=this;switch(i.selectedMode){case c.SINGLE:if(!i.repeatEventSingle&&t==i._selectedId)return;e=i.getItemByListId(t);var n=void 0;if(i._selectedId>=0?i._lastSelectedId=i._selectedId:i._lastSelectedId=null,i._selectedId=t,e&&((n=e.getComponent(n)).selected=!0),i._lastSelectedId>=0&&i._lastSelectedId!=i._selectedId){var o=i.getItemByListId(i._lastSelectedId);o&&(o.getComponent(n).selected=!1)}i.selectedEvent&&cc.Component.EventHandler.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems);break;case c.MULT:if(!(e=i.getItemByListId(t)))return;var r=e.getComponent(l.default);i._selectedId>=0&&(i._lastSelectedId=i._selectedId),i._selectedId=t;var a=!r.selected;r.selected=a;var s=i.multSelected.indexOf(t);a&&s<0?i.multSelected.push(t):!a&&s>=0&&i.multSelected.splice(s,1),i.selectedEvent&&cc.Component.EventHandler.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems,a)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numItems",{get:function(){return this._actualNumItems},set:function(t){var e=this;if(e.checkInited(!1))if(null==t||t<0)cc.error("numItems set the wrong::",t);else if(e._actualNumItems=e._numItems=t,e._forceUpdate=!0,e._virtual)e._resizeContent(),e.cyclic&&(e._numItems=e._cyclicNum*e._numItems),e._onScrolling(),e.frameByFrameRenderNum||e.slideMode!=s.PAGE||(e.curPageNum=e.nearestListId);else{var i=e.content.getComponent(cc.Layout);if(i&&(i.enabled=!0),e._delRedundantItem(),e.firstListId=0,e.frameByFrameRenderNum>0){for(var n=e.frameByFrameRenderNum>e._numItems?e._numItems:e.frameByFrameRenderNum,o=0;o<n;o++)e._createOrUpdateItem2(o);e.frameByFrameRenderNum<e._numItems&&(e._updateCounter=e.frameByFrameRenderNum,e._updateDone=!1)}else{for(o=0;o<t;o++)e._createOrUpdateItem2(o);e.displayItemNum=t}}else console.log("\u672a\u521d\u59cb\u5316")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._init()},e.prototype.onDestroy=function(){var t=this;for(t._itemTmp&&t._itemTmp.isValid&&t._itemTmp.destroy(),t.tmpNode&&t.tmpNode.isValid&&t.tmpNode.destroy();t._pool.size();)t._pool.get().destroy()},e.prototype.onEnable=function(){this._registerEvent(),this._init()},e.prototype.onDisable=function(){this._unregisterEvent()},e.prototype._registerEvent=function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.on("touch-up",t._onTouchUp,t),t.node.on(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.on("scroll-began",t._onScrollBegan,t,!0),t.node.on("scroll-ended",t._onScrollEnded,t,!0),t.node.on("scrolling",t._onScrolling,t,!0),t.node.on(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},e.prototype._unregisterEvent=function(){var t=this;t.node.off(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.off("touch-up",t._onTouchUp,t),t.node.off(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.off("scroll-began",t._onScrollBegan,t,!0),t.node.off("scroll-ended",t._onScrollEnded,t,!0),t.node.off("scrolling",t._onScrolling,t,!0),t.node.off(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},e.prototype._init=function(){var t=this;if(!t._inited)if(t._scrollView=t.node.getComponent(cc.ScrollView),t.content=t._scrollView.content,t.content){switch(t._layout=t.content.getComponent(cc.Layout),t._align=t._layout.type,t._resizeMode=t._layout.resizeMode,t._startAxis=t._layout.startAxis,t._topGap=t._layout.paddingTop,t._rightGap=t._layout.paddingRight,t._bottomGap=t._layout.paddingBottom,t._leftGap=t._layout.paddingLeft,t._columnGap=t._layout.spacingX,t._lineGap=t._layout.spacingY,t._colLineNum,t._verticalDir=t._layout.verticalDirection,t._horizontalDir=t._layout.horizontalDirection,t.setTemplateItem(cc.instantiate(t.templateType==a.PREFAB?t.tmpPrefab:t.tmpNode)),t._slideMode!=s.ADHERING&&t._slideMode!=s.PAGE||(t._scrollView.inertia=!1,t._scrollView._onMouseWheel=function(){}),t.virtual||(t.lackCenter=!1),t._lastDisplayData=[],t.displayData=[],t._pool=new cc.NodePool,t._forceUpdate=!1,t._updateCounter=0,t._updateDone=!0,t.curPageNum=0,t.cyclic&&(t._scrollView._processAutoScrolling=this._processAutoScrolling.bind(t),t._scrollView._startBounceBackIfNeeded=function(){return!1}),t._align){case cc.Layout.Type.HORIZONTAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}}}t.content.removeAllChildren(),t._inited=!0}else cc.error(t.node.name+"'s cc.ScrollView unset content!")},e.prototype._processAutoScrolling=function(t){this._scrollView._autoScrollAccumulatedTime+=1*t;var e=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var i=e-1;e=i*i*i*i*i+1}var n=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(e)),o=this._scrollView.getScrollEndedEventTiming(),r=Math.abs(e-1)<=o;Math.abs(e-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),r&&(this._scrollView._autoScrolling=!1);var a=n.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(a),r),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},e.prototype.setTemplateItem=function(t){if(t){var e=this;e._itemTmp=t,e._resizeMode==cc.Layout.ResizeMode.CHILDREN?e._itemSize=e._layout.cellSize:e._itemSize=cc.size(t.width,t.height);var i=t.getComponent(l.default),n=!1;switch(i||(n=!0),n&&(e.selectedMode=c.NONE),(i=t.getComponent(cc.Widget))&&i.enabled&&(e._needUpdateWidget=!0),e.selectedMode==c.MULT&&(e.multSelected=[]),e._align){case cc.Layout.Type.HORIZONTAL:e._colLineNum=1,e._sizeType=!1;break;case cc.Layout.Type.VERTICAL:e._colLineNum=1,e._sizeType=!0;break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var o=e.content.width-e._leftGap-e._rightGap;e._colLineNum=Math.floor((o+e._columnGap)/(e._itemSize.width+e._columnGap)),e._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var r=e.content.height-e._topGap-e._bottomGap;e._colLineNum=Math.floor((r+e._lineGap)/(e._itemSize.height+e._lineGap)),e._sizeType=!1}}}},e.prototype.checkInited=function(t){return void 0===t&&(t=!0),!!this._inited||(t&&cc.error("List initialization not completed!"),!1)},e.prototype._resizeContent=function(){var t,e=this;switch(e._align){case cc.Layout.Type.HORIZONTAL:if(e._customSize){var i=e._getFixedSize(null);t=e._leftGap+i.val+e._itemSize.width*(e._numItems-i.count)+e._columnGap*(e._numItems-1)+e._rightGap}else t=e._leftGap+e._itemSize.width*e._numItems+e._columnGap*(e._numItems-1)+e._rightGap;break;case cc.Layout.Type.VERTICAL:e._customSize?(i=e._getFixedSize(null),t=e._topGap+i.val+e._itemSize.height*(e._numItems-i.count)+e._lineGap*(e._numItems-1)+e._bottomGap):t=e._topGap+e._itemSize.height*e._numItems+e._lineGap*(e._numItems-1)+e._bottomGap;break;case cc.Layout.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var n=Math.ceil(e._numItems/e._colLineNum);t=e._topGap+e._itemSize.height*n+e._lineGap*(n-1)+e._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var o=Math.ceil(e._numItems/e._colLineNum);t=e._leftGap+e._itemSize.width*o+e._columnGap*(o-1)+e._rightGap}}var r=e.content.getComponent(cc.Layout);if(r&&(r.enabled=!1),e._allItemSize=t,e._allItemSizeNoEdge=e._allItemSize-(e._sizeType?e._topGap+e._bottomGap:e._leftGap+e._rightGap),e.cyclic){var a=e._sizeType?e.node.height:e.node.width;e._cyclicPos1=0,a-=e._cyclicPos1,e._cyclicNum=Math.ceil(a/e._allItemSizeNoEdge)+1;var s=e._sizeType?e._lineGap:e._columnGap;e._cyclicPos2=e._cyclicPos1+e._allItemSizeNoEdge+s,e._cyclicAllItemSize=e._allItemSize+e._allItemSizeNoEdge*(e._cyclicNum-1)+s*(e._cyclicNum-1),e._cycilcAllItemSizeNoEdge=e._allItemSizeNoEdge*e._cyclicNum,e._cycilcAllItemSizeNoEdge+=s*(e._cyclicNum-1)}e._lack=!e.cyclic&&e._allItemSize<(e._sizeType?e.node.height:e.node.width);var c=e._lack&&e.lackCenter||!e.lackSlide?.1:0,l=e._lack?(e._sizeType?e.node.height:e.node.width)-c:e.cyclic?e._cyclicAllItemSize:e._allItemSize;l<0&&(l=0),e._sizeType?e.content.height=l:e.content.width=l},e.prototype._onScrolling=function(t){if(void 0===t&&(t=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var e=this.content.getPosition();e=this._sizeType?e.y:e.x;var i=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),n=this._sizeType?cc.v2(0,i):cc.v2(i,0);switch(this._alignCalcType){case 1:e>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n))):e<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n)));break;case 2:e<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))):e>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n)));break;case 3:e<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))):e>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n)));break;case 4:e>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n))):e<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n)))}}var o,r,a,s;if(this._calcViewPos(),this._sizeType?(o=this.viewTop,a=this.viewBottom):(r=this.viewRight,s=this.viewLeft),this._virtual){this.displayData=[];var c=void 0,l=0,u=this._numItems-1;if(this._customSize)for(var p=!1;l<=u&&!p;l++)switch(c=this._calcItemPos(l),this._align){case cc.Layout.Type.HORIZONTAL:c.right>=s&&c.left<=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(p=!0);break;case cc.Layout.Type.VERTICAL:c.bottom<=o&&c.top>=a?this.displayData.push(c):0!=l&&this.displayData.length>0&&(p=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:c.bottom<=o&&c.top>=a?this.displayData.push(c):0!=l&&this.displayData.length>0&&(p=!0);break;case cc.Layout.AxisDirection.VERTICAL:c.right>=s&&c.left<=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(p=!0)}}else{var h=this._itemSize.width+this._columnGap,d=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:l=(s+this._leftGap)/h,u=(r+this._rightGap)/h;break;case 2:l=(-r-this._rightGap)/h,u=(-s-this._leftGap)/h;break;case 3:l=(-o-this._topGap)/d,u=(-a-this._bottomGap)/d;break;case 4:l=(a+this._bottomGap)/d,u=(o+this._topGap)/d}for(l=Math.floor(l)*this._colLineNum,u=Math.ceil(u)*this._colLineNum,l<0&&(l=0),--u>=this._numItems&&(u=this._numItems-1);l<=u;l++)this.displayData.push(this._calcItemPos(l))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var f=this._lastDisplayData.length,_=this.displayItemNum!=f;if(_&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(t,e){return t-e}),_=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[f-1]),this._forceUpdate||_)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var y=0;y<this.displayItemNum;y++)this._createOrUpdateItem(this.displayData[y]);this._forceUpdate=!1}this._calcNearestItem()}}},e.prototype._calcViewPos=function(){var t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=t.x>0?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(t.x>0?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(t.y>0?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=t.y>0?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},e.prototype._calcItemPos=function(t){var e,i,n,o,r,a,s,c;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var l=this._getFixedSize(t);r=this._leftGap+(this._itemSize.width+this._columnGap)*(t-l.count)+(l.val+this._columnGap*l.count),e=(u=this._customSize[t])>0?u:this._itemSize.width}else r=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;return a=r+e,this.lackCenter&&(r+=p=this.content.width/2-this._allItemSizeNoEdge/2,a+=p),{id:t,left:r,right:a,x:r+this._itemTmp.anchorX*e,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:return this._customSize?(l=this._getFixedSize(t),a=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-l.count)-(l.val+this._columnGap*l.count),e=(u=this._customSize[t])>0?u:this._itemSize.width):(a=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width),r=a-e,this.lackCenter&&(r-=p=this.content.width/2-this._allItemSizeNoEdge/2,a-=p),{id:t,right:a,left:r,x:r+this._itemTmp.anchorX*e,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:return this._customSize?(l=this._getFixedSize(t),n=-this._topGap-(this._itemSize.height+this._lineGap)*(t-l.count)-(l.val+this._lineGap*l.count),i=(u=this._customSize[t])>0?u:this._itemSize.height):(n=-this._topGap-(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height),o=n-i,this.lackCenter&&(n-=p=this.content.height/2-this._allItemSizeNoEdge/2,o-=p),{id:t,top:n,bottom:o,x:this._itemTmp.x,y:o+this._itemTmp.anchorY*i};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var u,p;if(this._customSize)l=this._getFixedSize(t),o=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-l.count)+(l.val+this._lineGap*l.count),i=(u=this._customSize[t])>0?u:this._itemSize.height;else o=this._bottomGap+(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;return n=o+i,this.lackCenter&&(n+=p=this.content.height/2-this._allItemSizeNoEdge/2,o+=p),{id:t,top:n,bottom:o,x:this._itemTmp.x,y:o+this._itemTmp.anchorY*i}}case cc.Layout.Type.GRID:var h=Math.floor(t/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c=(o=(n=-this._topGap-(this._itemSize.height+this._lineGap)*h)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:n=(o=this._bottomGap+(this._itemSize.height+this._lineGap)*h)+this._itemSize.height,c=o+this._itemTmp.anchorY*this._itemSize.height}switch(s=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:s+=this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s+=(1-this._itemTmp.anchorX)*this._itemSize.width,s-=(1-this.content.anchorX)*this.content.width,s*=-1}return{id:t,top:n,bottom:o,x:s,y:c};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:a=(r=this._leftGap+(this._itemSize.width+this._columnGap)*h)+this._itemSize.width,s=r+this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s=(r=(a=-this._rightGap-(this._itemSize.width+this._columnGap)*h)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,s+=(1-this.content.anchorX)*this.content.width}switch(c=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c-=(1-this._itemTmp.anchorY)*this._itemSize.height,c+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:c-=this._itemTmp.anchorY*this._itemSize.height,c+=this.content.anchorY*this.content.height,c*=-1}return{id:t,left:r,right:a,x:s,y:c}}}},e.prototype._calcExistItemPos=function(t){var e=this.getItemByListId(t);if(!e)return null;var i={id:t,x:e.x,y:e.y};return this._sizeType?(i.top=e.y+e.height*(1-e.anchorY),i.bottom=e.y-e.height*e.anchorY):(i.left=e.x-e.width*e.anchorX,i.right=e.x+e.width*(1-e.anchorX)),i},e.prototype.getItemPos=function(t){return this._virtual?this._calcItemPos(t):this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t)},e.prototype._getFixedSize=function(t){if(!this._customSize)return null;null==t&&(t=this._numItems);var e=0,i=0;for(var n in this._customSize)parseInt(n)<t&&(e+=this._customSize[n],i++);return{val:e,count:i}},e.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},e.prototype._onScrollEnded=function(){var t=this;if(null!=t.scrollToListId){var e=t.getItemByListId(t.scrollToListId);t.scrollToListId=null,e&&e.runAction(cc.sequence(cc.scaleTo(.1,1.06),cc.scaleTo(.1,1)))}t._onScrolling(),t._slideMode!=s.ADHERING||t.adhering?t._slideMode==s.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()):t.adhere()},e.prototype._onTouchStart=function(t,e){if(!this._scrollView.hasNestedViewGroup(t,e)&&(t.eventPhase!==cc.Event.AT_TARGET||t.target!==this.node)){for(var i=t.target;null==i._listId&&i.parent;)i=i.parent;this._scrollItem=null!=i._listId?i:t.target}},e.prototype._onTouchUp=function(){var t=this;t._scrollPos=null,t._slideMode==s.ADHERING?(this.adhering&&(this._adheringBarrier=!0),t.adhere()):t._slideMode==s.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()),this._scrollItem=null},e.prototype._onTouchCancelled=function(t,e){var i=this;i._scrollView.hasNestedViewGroup(t,e)||t.simulate||(i._scrollPos=null,i._slideMode==s.ADHERING?(i.adhering&&(i._adheringBarrier=!0),i.adhere()):i._slideMode==s.PAGE&&(null!=i._beganPos?i._pageAdhere():i.adhere()),this._scrollItem=null)},e.prototype._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},e.prototype._onItemAdaptive=function(t){if(!this._sizeType&&t.width!=this._itemSize.width||this._sizeType&&t.height!=this._itemSize.height){this._customSize||(this._customSize={});var e=this._sizeType?t.height:t.width;this._customSize[t._listId]!=e&&(this._customSize[t._listId]=e,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},e.prototype._pageAdhere=function(){var t=this;if(t.cyclic||!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){var e=t._sizeType?t.viewTop:t.viewLeft,i=(t._sizeType?t.node.height:t.node.width)*t.pageDistance;if(Math.abs(t._beganPos-e)>i)switch(t._alignCalcType){case 1:case 4:t._beganPos>e?t.prePage(.5):t.nextPage(.5);break;case 2:case 3:t._beganPos<e?t.prePage(.5):t.nextPage(.5)}else t.elasticTop<=0&&t.elasticRight<=0&&t.elasticBottom<=0&&t.elasticLeft<=0&&t.adhere();t._beganPos=null}},e.prototype.adhere=function(){var t=this;if(t.checkInited()&&!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){t.adhering=!0,t._calcNearestItem();var e=(t._sizeType?t._topGap:t._leftGap)/(t._sizeType?t.node.height:t.node.width);t.scrollTo(t.nearestListId,.7,e)}},e.prototype.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++){var i=this.displayData[e];i&&this._createOrUpdateItem(i)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==s.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(t=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++)this._createOrUpdateItem2(e);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==s.PAGE&&(this.curPageNum=this.nearestListId)},e.prototype._createOrUpdateItem=function(t){var e=this.getItemByListId(t.id);if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems));else{var i=this._pool.size()>0;if((e=i?this._pool.get():cc.instantiate(this._itemTmp))._listId!=t.id&&(e._listId=t.id,e.setContentSize(this._itemSize)),e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.content.addChild(e),i&&this._needUpdateWidget){var n=e.getComponent(cc.Widget);n&&n.updateAlignment()}e.setSiblingIndex(this.content.childrenCount-1);var o=e.getComponent(l.default);e.listItem=o,o&&(o.listId=t.id,o.list=this,o._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems)}this._resetItemSize(e),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)},e.prototype._createOrUpdateItem2=function(t){var e,i=this.content.children[t];i?this._forceUpdate&&this.renderEvent&&(i._listId=t,e&&(e.listId=t),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,t)):((i=cc.instantiate(this._itemTmp))._listId=t,this.content.addChild(i),e=i.getComponent(e),i.listItem=e,e&&(e.listId=t,e.list=this,e._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,t)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)},e.prototype._updateListItem=function(t){if(t&&this.selectedMode>c.NONE){var e=t.node;switch(this.selectedMode){case c.SINGLE:t.selected=this.selectedId==e._listId;break;case c.MULT:t.selected=this.multSelected.indexOf(e._listId)>=0}}},e.prototype._resetItemSize=function(){},e.prototype._updateItemPos=function(t){var e=isNaN(t)?t:this.getItemByListId(t),i=this.getItemPos(e._listId);e.setPosition(i.x,i.y)},e.prototype.setMultSelected=function(t,e){var i=this;if(i.checkInited()){if(Array.isArray(t)||(t=[t]),null==e)i.multSelected=t;else{var n=void 0,o=void 0;if(e)for(var r=t.length-1;r>=0;r--)n=t[r],(o=i.multSelected.indexOf(n))<0&&i.multSelected.push(n);else for(r=t.length-1;r>=0;r--)n=t[r],(o=i.multSelected.indexOf(n))>=0&&i.multSelected.splice(o,1)}i._forceUpdate=!0,i._onScrolling()}},e.prototype.updateItem=function(t){if(this.checkInited()){Array.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var n=t[e],o=this.getItemByListId(n);o&&cc.Component.EventHandler.emitEvents([this.renderEvent],o,n%this._actualNumItems)}}},e.prototype.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},e.prototype.getItemByListId=function(t){for(var e=this.content.childrenCount-1;e>=0;e--){var i=this.content.children[e];if(i._listId==t)return i}},e.prototype._getOutsideItem=function(){for(var t,e=[],i=this.content.childrenCount-1;i>=0;i--)t=this.content.children[i],this.displayData.find(function(e){return e.id==t._listId})||e.push(t);return e},e.prototype._delRedundantItem=function(){if(this._virtual)for(var t=this._getOutsideItem(),e=t.length-1;e>=0;e--){var i=t[e];if(!this._scrollItem||i._listId!=this._scrollItem._listId){this._pool.put(i);for(var n=this._lastDisplayData.length-1;n>=0;n--)if(this._lastDisplayData[n]==i._listId){this._lastDisplayData.splice(n,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},e.prototype._delSingleItem=function(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null},e.prototype.aniDelItem=function(t,e,i){var n=this;if(!n.checkInited()||n.cyclic||!n._virtual)return cc.error("This function is not allowed to be called!");if(n._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var o,r=n.getItemByListId(t);if(r){o=r.getComponent(o),n._aniDelRuning=!0;var a=n.displayData[n.displayData.length-1].id,s=o.selected;o.showAni(i,function(){var i,o,l;if(a<n._numItems-2&&(i=a+1),null!=i){var u=n._calcItemPos(i);n.displayData.push(u),n._virtual?n._createOrUpdateItem(u):n._createOrUpdateItem2(i)}else n._numItems--;if(n.selectedMode==c.SINGLE)s?n._selectedId=-1:n._selectedId-1>=0&&n._selectedId--;else if(n.selectedMode==c.MULT&&n.multSelected.length){var p=n.multSelected.indexOf(t);p>=0&&n.multSelected.splice(p,1);for(var h=n.multSelected.length-1;h>=0;h--)(_=n.multSelected[h])>=t&&n.multSelected[h]--}if(n._customSize){n._customSize[t]&&delete n._customSize[t];var d={},f=void 0;for(var _ in n._customSize){f=n._customSize[_];var y=parseInt(_);d[y-(y>=t?1:0)]=f}n._customSize=d}for(h=null!=i?i:a;h>=t+1;h--)if(r=n.getItemByListId(h)){var m=n._calcItemPos(h-1);o=[cc.moveTo(.2333,cc.v2(m.x,m.y))],h<=t+1&&(l=!0,o.push(cc.callFunc(function(){n._aniDelRuning=!1,e(t)}))),o.length>1?r.runAction(cc.sequence(o)):r.runAction(o[0])}l||(n._aniDelRuning=!1,e(t))},!0)}else e(t)},e.prototype.scrollTo=function(t,e,i,n){void 0===e&&(e=.5),void 0===i&&(i=null),void 0===n&&(n=!1);var o=this;if(o.checkInited(!1)){null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=o._numItems&&(t=o._numItems-1),!o._virtual&&o._layout&&o._layout.enabled&&o._layout.updateLayout();var r,a,s=o.getItemPos(t);switch(o._alignCalcType){case 1:r=s.left,r-=null!=i?o.node.width*i:o._leftGap,s=cc.v2(r,0);break;case 2:r=s.right-o.node.width,r+=null!=i?o.node.width*i:o._rightGap,s=cc.v2(r+o.content.width,0);break;case 3:a=s.top,a+=null!=i?o.node.height*i:o._topGap,s=cc.v2(0,-a);break;case 4:a=s.bottom+o.node.height,a-=null!=i?o.node.height*i:o._bottomGap,s=cc.v2(0,-a+o.content.height)}var c=o.content.getPosition();c=Math.abs(o._sizeType?c.y:c.x);var l=o._sizeType?s.y:s.x;Math.abs((null!=o._scrollPos?o._scrollPos:c)-l)>.5&&(o._scrollView.scrollToOffset(s,e),o._scrollToListId=t,o._scrollToEndTime=(new Date).getTime()/1e3+e,o._scrollToSo=o.scheduleOnce(function(){if(o._adheringBarrier||(o.adhering=o._adheringBarrier=!1),o._scrollPos=o._scrollToListId=o._scrollToEndTime=o._scrollToSo=null,n){var e=o.getItemByListId(t);e&&e.runAction(cc.sequence(cc.scaleTo(.1,1.05),cc.scaleTo(.1,1)))}},e+.1),e<=0&&o._onScrolling())}},e.prototype._calcNearestItem=function(){var t,e,i,n,o,r,a=this;a.nearestListId=null,a._virtual&&a._calcViewPos(),i=a.viewTop,n=a.viewRight,o=a.viewBottom,r=a.viewLeft;for(var s=!1,c=0;c<a.content.childrenCount&&!s;c+=a._colLineNum)if(t=a._virtual?a.displayData[c]:a._calcExistItemPos(c))switch(e=a._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,a._alignCalcType){case 1:t.right>=r&&(a.nearestListId=t.id,r>e&&(a.nearestListId+=a._colLineNum),s=!0);break;case 2:t.left<=n&&(a.nearestListId=t.id,n<e&&(a.nearestListId+=a._colLineNum),s=!0);break;case 3:t.bottom<=i&&(a.nearestListId=t.id,i<e&&(a.nearestListId+=a._colLineNum),s=!0);break;case 4:t.top>=o&&(a.nearestListId=t.id,o>e&&(a.nearestListId+=a._colLineNum),s=!0)}if((t=a._virtual?a.displayData[a.displayItemNum-1]:a._calcExistItemPos(a._numItems-1))&&t.id==a._numItems-1)switch(e=a._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,a._alignCalcType){case 1:n>e&&(a.nearestListId=t.id);break;case 2:r<e&&(a.nearestListId=t.id);break;case 3:o<e&&(a.nearestListId=t.id);break;case 4:i>e&&(a.nearestListId=t.id)}},e.prototype.prePage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,t)},e.prototype.nextPage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,t)},e.prototype.skipPage=function(t,e){var i=this;if(i.checkInited())return i._slideMode!=s.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=i._numItems||i.curPageNum!=t&&(i.curPageNum=t,i.pageChangeEvent&&cc.Component.EventHandler.emitEvents([i.pageChangeEvent],t),i.scrollTo(t,e)))},e.prototype.calcCustomSize=function(t){var e=this;if(e.checkInited()){if(!e._itemTmp)return cc.error("Unset template item!");if(!e.renderEvent)return cc.error("Unset Render-Event!");e._customSize={};var i=cc.instantiate(e._itemTmp);e.content.addChild(i);for(var n=0;n<t;n++)cc.Component.EventHandler.emitEvents([e.renderEvent],i,n),i.height==e._itemSize.height&&i.width==e._itemSize.width||(e._customSize[n]=e._sizeType?i.height:i.width);return Object.keys(e._customSize).length||(e._customSize=null),i.removeFromParent(),i.destroy&&i.destroy(),e._customSize}},r([h({type:cc.Enum(a),tooltip:!1})],e.prototype,"templateType",void 0),r([h({type:cc.Node,tooltip:!1,visible:function(){return this.templateType==a.NODE}})],e.prototype,"tmpNode",void 0),r([h({type:cc.Prefab,tooltip:!1,visible:function(){return this.templateType==a.PREFAB}})],e.prototype,"tmpPrefab",void 0),r([h()],e.prototype,"_slideMode",void 0),r([h({type:cc.Enum(s),tooltip:!1})],e.prototype,"slideMode",null),r([h({type:cc.Float,range:[0,1,.1],tooltip:!1,slide:!0,visible:function(){return this._slideMode==s.PAGE}})],e.prototype,"pageDistance",void 0),r([h({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this._slideMode==s.PAGE}})],e.prototype,"pageChangeEvent",void 0),r([h()],e.prototype,"_virtual",void 0),r([h({type:cc.Boolean,tooltip:!1})],e.prototype,"virtual",null),r([h({tooltip:!1,visible:function(){var t=this.virtual&&this.slideMode==s.NORMAL;return t||(this.cyclic=!1),t}})],e.prototype,"cyclic",void 0),r([h({tooltip:!1,visible:function(){return this.virtual}})],e.prototype,"lackCenter",void 0),r([h({tooltip:!1,visible:function(){var t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t}})],e.prototype,"lackSlide",void 0),r([h({type:cc.Integer})],e.prototype,"_updateRate",void 0),r([h({type:cc.Integer,range:[0,6,1],tooltip:!1,slide:!0})],e.prototype,"updateRate",null),r([h({type:cc.Integer,range:[0,12,1],tooltip:!1,slide:!0})],e.prototype,"frameByFrameRenderNum",void 0),r([h({type:cc.Component.EventHandler,tooltip:!1})],e.prototype,"renderEvent",void 0),r([h({type:cc.Enum(c),tooltip:!1})],e.prototype,"selectedMode",void 0),r([h({tooltip:!1,visible:function(){return this.selectedMode==c.SINGLE}})],e.prototype,"repeatEventSingle",void 0),r([h({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this.selectedMode>c.NONE}})],e.prototype,"selectedEvent",void 0),r([h({serializable:!1})],e.prototype,"_numItems",void 0),r([p,d(),f("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/\u865a\u62df\u5217\u8868/List"),y(cc.ScrollView),_(-5e3)],e)}(cc.Component);i.default=m,cc._RF.pop()},{"./ListItem":"ListItem"}],ModelTips:[function(t,e,i){"use strict";cc._RF.push(e,"46ae8SBoSJC86BjOoLYH2n0","ModelTips");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.vo=null,e}return o(e,t),e.prototype.start=function(){},e.prototype.setData=function(t){this.vo=t,this.label.overflow=cc.Label.Overflow.NONE,this.label.string=t+"",this.label._forceUpdateRenderData(!0),this.label.node.width>500&&(this.label.string="",this.label.overflow=cc.Label.Overflow.RESIZE_HEIGHT,this.label.node.width=500,this.label.string=t+"",this.label._forceUpdateRenderData(!0)),this.label.node.parent.width=this.label.node.width+50,this.label.node.parent.height=this.label.node.height+50},r([c(cc.Label)],e.prototype,"label",void 0),r([s],e)}(cc.Component);i.default=l,cc._RF.pop()},{}],app:[function(t,e,i){"use strict";cc._RF.push(e,"353cdUSR5JHfKcWROFsovIG","app"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./utils/dateUtils"),o=t("./utils/encodeUtils"),r=t("./utils/eventNameUtils"),a=t("./utils/eventObjUtils"),s=t("./utils/eventUtils"),c=t("./utils/httpUtils"),l=t("./utils/imgUrils"),u=t("./utils/jsUrils"),p=t("./utils/poolUtils"),h=t("./utils/promiseUtils"),d=t("./utils/randomUtils"),f=t("./utils/storageUtil"),_=t("./utils/tweenUtils"),y=t("./utils/uiManagerUtils"),m=t("./utils/urlUtils"),g=function(){function t(){}return Object.defineProperty(t,"promise",{get:function(){return h.default.instance()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"pool",{get:function(){return p.default.instance()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"event",{get:function(){return s.default.instance()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"eName",{get:function(){return r.default.instance()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"rand",{get:function(){return d.default.instance()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"date",{get:function(){return n.default.instance()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"encode",{get:function(){return o.default.instance()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"eventObj",{get:function(){return a.default.instance()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"http",{get:function(){return c.default.instance()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"img",{get:function(){return l.default.instance()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"common",{get:function(){return u.default.instance()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"tween",{get:function(){return _.default.instance()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"uiMgr",{get:function(){return y.default.instance()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"url",{get:function(){return m.default.instance()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storage",{get:function(){return f.default.instance()},enumerable:!1,configurable:!0}),t}();i.default=g,cc._RF.pop()},{"./utils/dateUtils":"dateUtils","./utils/encodeUtils":"encodeUtils","./utils/eventNameUtils":"eventNameUtils","./utils/eventObjUtils":"eventObjUtils","./utils/eventUtils":"eventUtils","./utils/httpUtils":"httpUtils","./utils/imgUrils":"imgUrils","./utils/jsUrils":"jsUrils","./utils/poolUtils":"poolUtils","./utils/promiseUtils":"promiseUtils","./utils/randomUtils":"randomUtils","./utils/storageUtil":"storageUtil","./utils/tweenUtils":"tweenUtils","./utils/uiManagerUtils":"uiManagerUtils","./utils/urlUtils":"urlUtils"}],bbcode:[function(t,e){"use strict";cc._RF.push(e,"ef660HkBEFO5rvqPE0SM8UO","bbcode"),function(){function t(){this.name="",this.length=0}function e(){this.stack=[],this.length=0}var i,n,o,r;t.duptags=["div","span"],t.headingtags=["h1","h2","h3","h4","h5","h6"],t.selfendtags=["!doctype","meta","link","img","br"],t.newlinetags=["div","p","br","li","tr"].concat(t.headingtags),t.noemptytags=["head","style","script","span","a","font","color","size","face","strong","b","em","i","del","s","ins","u"],t.noemptyattrtags=["img"],t.prototype.findquoteend=function(t,e,i){var n=-1,o=e||0,r=t.length,a='"'===t[o];for(o++;o<r;)if("\\"===t[o])switch(t[++o]){case"u":o+=5;break;case"x":o+=3;break;default:o++}else{if(a&&'"'===t[o]||!a&&"'"===t[o]){n=o;break}if("\n"===t[o]&&!i)break;o++}return n},t.prototype.findscriptend=function(t,e){for(var i=-1,n=e||0,o=t.length,r=/(['"]|<\s*?\/\s*?script\s*?>)/gi;n<o;)if('"'===t[n]||"'"===t[n]){var a=this.findquoteend(t,n,!0);if(-1===a)break;n=a+1}else{r.lastIndex=n;var s=r.exec(t);if(!s||s.length<=0)break;if("<"===s[0][0]){i=r.lastIndex-s[0].length;break}n=r.lastIndex-1}return i},t.prototype.quote=function(t){if("'"===t[0]){for(var e='"',i=1,n=t.length-1,o=i;i<n;)if("\\"===t[i])switch(t[++i]){case"u":i+=5;break;case"x":i+=3;break;default:i++}else{if('"'===t[i]){e+=t.substr(o,i-o),e+='\\"',o=++i;break}i++}return o<n&&(e+=t.substr(o,n-o)),e+'"'}return t},t.prototype.parseStyle=function(t){for(var e=t.split(";"),i={},n=0,o=0;o<e.length;o++){var r=e[o].split(":");if(r.length>=2){var a;if(n++,"'"===(a=r.length>2?r.slice(1).join(":").trim():r[1].trim())[0]&&"'"===a[a.length-1])try{a=JSON.parse(this.quote(a))}catch(s){}i[r[0].trim().toLowerCase()]=a}}return n>0?i:void 0},t.prototype.parseAttributes=function(t){for(var e=/\s/,i=0,n=(t=t.trim()).length,o=i,r=null,a=!1,s={},c=function(t,e){void 0===e&&(e=null),t=t.trim().toLowerCase(),s[t]=e};i<n;){if("="===t[i])r=t.substr(o,i-o),a=!1;else if(e.test(t[i]))r&&a?(c(r,t.substr(o,i-o)),a=!1,r=null):i-o>0&&(c(r=t.substr(o,i-o)),r=null),o=i+1;else if(r&&!a)if(o=i,'"'===t[i]||"'"===t[i]){var l="'"===t[i];if(-1===(i=this.findquoteend(t,i)))break;var u=t.substr(o,i+1-o);l&&(u=this.quote(u));try{u=JSON.parse(u)}catch(f){}c(r,u),r=null,o=i+1}else a=!0;i++}if(o<n){var p=t.substr(o);r?c(r,p):c(p),r=null}var h=0;for(var d in s)h++;h>0&&(s.style&&(s.style=this.parseStyle(s.style)),this.attr=s)},t.prototype.parse=function(i){var n=0;if("<"!==i[n])throw new Error("not a tag");for(var o=i.length,r=/\s/;n<o;)if("<"===i[n])n++;else{if(">"===i[n])return this.length=n+1,this;if(!r.test(i[n]))break;n++}if(n>=o)return this.length=o,this;for(var a=n,s=!1;n<o&&!r.test(i[n]);){if(">"===i[n]){s=!0;break}if("/"===i[n])break;n++}if(n>=o)return this.length=n,this;if(this.name=i.substr(a,n-a).trim().toLowerCase(),this.name.length>0&&"/"===this.name[0])return this.length=n,this.name=this.name.substr(1),this.selfend=!0,this;if(t.selfendtags.indexOf(this.name)>=0&&(this.selfend=!0),!s){for(a=n;n<o&&">"!==i[n];)n++;if(n>=o)return this.length=n,this;if(n-a>0){var c=i.substr(a,n-a).trim(),l=c.length;l>0&&"/"===c[l-1]&&(this.selfend=!0,c=c.substr(0,l-1)),this.parseAttributes(c)}}if(n++,this.selfend)return this.length=n,this;var u=this,p=function(t){var i=(new e).parse(t);return u.content?u.content.append(i):u.content=i,i.length};if("script"===this.name){var h=this.findscriptend(i.substr(n));if(h<0)return this.length=o,this;this.content=new e;var d=i.substr(n,h);return this.content.length=h,this.content.stack=[d],n+=h,(a=i.indexOf(">",n))<0?(this.length=o,this):(this.length=a+1,this)}for(;n<o;){for(a=n;n<o&&r.test(i[n]);)n++;for(;n<o&&"<"!==i[n];)n++;var f=n;for(n++;n<o&&r.test(i[n]);)n++;if(n>=o)return this.content=(new e).parse(i.substr(a)),this.length=o,this;if(n<o&&"/"===i[n]){for(n++;n<o&&r.test(i[n]);)n++;if(n>=o)return n+=p(i.substr(a)),this.length=o,this;for(var _=n,y=!1;n<o&&!r.test(i[n]);){if(">"===i[n]){y=!0;break}n++}if(n>_){if(!y)for(;n<o&&">"!==i[n];)n++;return i.substr(_,n-_).trim().toLowerCase(),n++,this.length=n,f>a&&p(i.substr(a,f-a)),this}}n=a+p(i.substr(a))}return this.length=n,this},e.prototype.parse=function(e){if(!e)return this;for(var i=0,n=e.length,o=0,r=/\s/,a=this,s=function(t,i){t<i&&a.push(e.substr(t,i-t))};i<n;)switch(e[i]){case"<":s(o,i);for(var c=i+1;c<n&&r.test(e[c]);)c++;if(c<n&&"/"===e[c])return this;var l=(new t).parse(e.substr(i));this.push(l),o=i+=l.length;break;case">":default:i++}return s(o,n),this},e.prototype.push=function(t){this.length+=t.length,this.stack.push(t)},e.prototype.pop=function(){return this.stack.pop()},e.prototype.append=function(t){this.stack=this.stack.concat(t.stack),this.length+=t.length},i=new RegExp("<\\s*?("+t.duptags.join("|")+")\\s*?>\\s*?<\\s*?\\1\\s*?>(((?!<\\s*?\\1\\s*?>)[\\S\\s])*?)<\\s*?/\\s*?\\1\\s*?>\\s*?<\\s*?/\\s*?\\1\\s*?>","ig"),n=new RegExp("(<\\s*?("+t.newlinetags.join("|")+")(\\s[^>]*?)?>)\\s+","ig"),o=new RegExp("\\s+(<\\s*?/\\s*?("+t.newlinetags.join("|")+")\\s*?>)","ig"),r=new RegExp("<\\s*?("+t.noemptytags.join("|")+")(\\s[^>]*?)?><\\s*?/\\s*?\\1\\s*?>","ig"),e.minify=function(t){var e,a=/<pre(\s.*?)?>/gi,s=/<\/pre>/gi,c=/\s{2,}/g,l="",u=-1;for(t=(t=(t=t.replace(r,"")).replace(n,"$1")).replace(o,"$1");a.exec(t);)u<0&&(u=0),l+=t.substr(u,a.lastIndex-u).replace(c," "),u=a.lastIndex,s.lastIndex=a.lastIndex,(e=s.exec(t))&&(a.lastIndex=s.lastIndex,l+=t.substr(u,e.index-u),u=e.index);for(t=u>=0?l+t.substr(u).replace(c," "):t.replace(c," ");i.test(t);)t=t.replace(i,"<$1>$2</$1>");return t};var a={nbsp:" ",amp:"&",lt:"<",gt:">",quot:'"'};function s(){this.s="",this.weaknewline=!0,this.stack=[]}function c(t){this.opts=t||{}}e.unescape=function(t,e){var i="&([a-zA-Z]+?|#[xX][\\da-fA-F]+?|#\\d+?);";if(new RegExp(i).test(t)){var n=new RegExp(i,"g");t=t.replace(n,function(t,i){if(i=i.toLowerCase(),e&&"nbsp"===i)return"&nbsp;";var n=a[i];if(n)return n;if("#"===i[0]){var o;if(o="x"==i[1]?parseInt(i.substr(2),16):parseInt(i.substr(1)))return String.fromCharCode(o)}return""})}return t},e.prototype.decode=function(i){for(var n=0;n<this.stack.length;n++){var o=this.stack[n];"string"==typeof o?this.stack[n]=e.unescape(o,i):o instanceof t&&o.content&&o.content.decode(i)}return this},e.prototype.dedup=function(){for(var e=0;e<this.stack.length;e++){var i=this.stack[e];if(i instanceof t&&i.content){if(t.duptags.indexOf(i.name)>=0&&!i.attr&&1===i.content.stack.length){var n=i.content.stack[0];if(n.name===i.name){this.stack[e]=n,e--;continue}}i.content.dedup()}}return this},e.prototype.strip=function(e,i){i||(i=!(e&&!i)||t.newlinetags.indexOf(e.name)>=0);for(var n=/^\s*$/,o=0,r=!0,a=0;a<this.stack.length;a++){if((u=this.stack[a])instanceof t){if(r=!0,u.content){var s;if(o<=0)s=i;else{s=!1;for(var c=a-1;c>=0;c--){var l=this.stack[c];if(l instanceof t){s=t.newlinetags.indexOf(l.name)>=0;break}if("string"!=typeof l||!n.test(l))break}}u.content.strip(u,s)}}else if("string"==typeof u&&n.test(u)&&r)continue;o++}r=!0;var u,p=[],h=0;for(a=0;a<this.stack.length;a++){if("string"==typeof(u=this.stack[a])&&n.test(u)&&i){if(r)continue;i=!1}else if(u instanceof t){if(r=!0,t.noemptyattrtags.indexOf(u.name)>=0){if(!u.attr)continue;var d=!1;for(var f in u.attr)if(u.attr[f]){d=!0;break}if(!d)continue}if(t.noemptytags.indexOf(u.name)>=0&&!u.content)continue;i=t.newlinetags.indexOf(u.name)>=0}else{if(i&&!(u=u.replace(/^\s+/g,"")))continue;u=u.replace(/\s+/g," "),r=!1,i=!1}h++,p.push(u)}if("string"==typeof(u=p[h-1])&&(h>=2&&n.test(u)?(p.splice(h-1,1),h--):/\S\s+$/.test(u)&&(p[h-1]=u.replace(/\s+$/,""))),!(h<=0&&e))return this.stack=p,this;delete e.content},e.prototype.showtree=function(e,i){e||(e=""),i||(i=0);for(var n=0;n<this.stack.length;n++){var o=this.stack[n];o instanceof t?(console.log(e,o.name,o.attr?JSON.stringify(o.attr):""),o.content&&o.content.showtree(e+"--",i+1)):"string"==typeof o&&console.log(e,JSON.stringify(o))}},s.maps={a:{section:"url",attr:"href"},img:{section:"img",data:"src",empty:!0},em:{section:"i"},i:{section:"i"},strong:{section:"b"},b:{section:"b"},del:{section:"s"},s:{section:"s"},ins:{section:"u"},u:{section:"u"},center:{section:"center"},ul:{section:"ul"},ol:{section:"ol"},li:{section:"li",newline:1},blockquote:{section:"quote"},code:{section:"code"},pre:{section:"code"},font:{extend:["color","face","size"]},span:{extend:["color","face","size"]},color:{section:"color",attr:"color"},size:{section:"size",attr:"size"},face:{section:"font",attr:"face"},h1:{section:"h1",newline:1},h2:{section:"h2",newline:1},h3:{section:"h3",newline:1},h4:{section:"h4",newline:1},h5:{section:"h5",newline:1},h6:{section:"h6",newline:1},p:{newline:1},br:{newline:2,empty:!0},table:{newline:1},tr:{newline:1},div:{newline:0},"!doctype":{ignore:!0},head:{ignore:!0},style:{ignore:!0},script:{ignore:!0},meta:{ignore:!0},link:{ignore:!0}},s.prototype.open=function(t,e,i){t&&(t instanceof Array?this.stack=this.stack.concat(t):this.stack.push({section:t,attr:e,data:i}))},s.prototype.append=function(t){this.solidify(),this._append(t)},s.prototype._append=function(t){t&&(this.s+=t,this.weaknewline=!1)},s.prototype.solidify=function(){var t;for(t=0;t<this.stack.length;t++){var e=this.stack[t],i=e.section,n=e.attr,o=e.data,r="["+i;if("string"==typeof n)r+="="+n;else for(var a in n)r+=" "+a+"="+n[a];r+="]",o&&(r+=o),this._append(r)}t>0&&(this.stack=[])},s.prototype.close=function(t){t&&(this.solidify(),this._append("[/"+t+"]"))},s.prototype.rollback=function(){this.stack=[]},s.prototype.newline=function(t){2===t?(this.append("\n"),this.weaknewline=!0):this.weaknewline||(this.append("\n"),this.weaknewline=!0)},s.prototype.toString=function(){return this.s},c.prototype.color=function(t){if(t){var e=/rgba?\s*?\(\s*?(\d{1,3})\s*?,\s*?(\d{1,3})\s*?,\s*?(\d{1,3})\s*?.*?\)/i;if(e.test(t)){var i=function(t){return t.length<2&&(t="0"+t),t};t=t.replace(e,function(t,e,n,o){return"#"+(e=i(parseInt(e).toString(16)))+(n=i(parseInt(n).toString(16)))+i(parseInt(o).toString(16))})}return t}},c.prototype.size=function(t){if(t){var e=[0,12,14,16,18,24,32,48];if(/^\d+$/.test(t))return t;if(!/^\d+?px$/.test(t)){var i=[null,"smaller","small","medium","large","x-large","xx-large","-webkit-xxx-large"].indexOf(t);return i>0?this.opts.transsize?i.toString():e[i].toString():void 0}if((t=parseInt(t))&&!(t<0)){if(!this.opts.transsize)return t.toString();for(var n=e.length;n>=0;n--){if(0===n)return"1";if(t>=e[n])return n.toString()}return t?t.toString():void 0}}},c.prototype.px=function(t){if(t)return(t=parseInt(t))?t.toString():void 0},c.prototype.convertStyle=function(t,e){if(e){var i,n=[],o=this,r=this.opts,a=function(e){if(e&&!e.ignore&&(e.section||e.extend&&e.extend.length>0)){var i={section:e.section};if(e.attr){if(!t.attr)return;switch(e.section){case"size":i.attr=o.size(t.attr[e.attr]);break;case"color":i.attr=o.color(t.attr[e.attr]);break;default:i.attr=t.attr[e.attr]}if(t.attr.style){var a;switch(e.section){case"size":(a=t.attr.style["font-size"])&&(a=o.size(a));break;case"color":(a=t.attr.style.color)&&(a=o.color(a));break;case"font":a=t.attr.style["font-family"]}a&&(i.attr=a)}if(!i.attr)return}else if("img"===e.section&&r.imagescale){var s,c,l,u;if(t.attr)s=o.px(t.attr.width),c=o.px(t.attr.height),t.attr.style&&((l=o.px(t.attr.style.width))&&(s=l),(u=o.px(t.attr.style.height))&&(c=u)),s&&c?i.attr=s+"x"+c:(s||c)&&(i.attr=s?{width:s}:{height:c})}e.data&&(i.data=t.attr[e.data]),n.push(i)}};if(t.attr&&t.attr.style)"b"!==t.name&&"strong"!==t.name&&("bold"===(i=t.attr.style["font-weight"])||/^\d+$/.test(i)&&parseInt(i)>=700)&&a(s.maps.b),"center"!==t.name&&("center"!==(i=t.attr.style["text-align"])||r.noalign||a(s.maps.center)),"em"!==t.name&&"i"!==t.name&&("italic"!==(i=t.attr.style["font-style"])&&"oblique"!==i||a(s.maps.i));if("list"===e.section||"ul"===e.section||"ol"===e.section||"li"===e.section){if(r.nolist)return[]}else if("center"===e.section){if(r.noalign)return[]}else if(/^h\d+$/.test(e.section)&&r.noheadings){var c=[null,"32px","24px","19px","16px","14px","12px"],l=e.section.match(/^h(\d+)$/),u=parseInt(l[1]);return u<=0?[]:(u>=c.length&&(u=c.length),n.push({section:"size",attr:o.size(c[u])}),n)}if("extend"in e)for(var p=0;p<e.extend.length;p++){var h=e.extend[p];a(s.maps[h])}else a(e);return n}},c.prototype.convert=function(e){var i=new s;if(!e)return i;var n=this;return function e(o){for(var r=0;r<o.length;r++){var a=o[r];if(a instanceof t)if(a.name in s.maps){var c=0,l=s.maps[a.name];if(l.ignore)continue;if("newline"in l&&(c=l.newline,i.newline(l.newline)),!a.content&&!l.empty)continue;var u=n.convertStyle(a,l);i.open(u),a.content&&e(a.content.stack);for(var p=u.length-1;p>=0;p--)i.close(u[p].section);c&&i.newline()}else a.content&&e(a.content.stack);else"string"==typeof a&&i.append(a)}}(e.stack),i},c.prototype.parse=function(t){return(new e).parse(t).strip().dedup().decode()},c.prototype.feed=function(t){var e=this.parse(t);return this.opts.debug&&e.showtree(),this.convert(e)},console.log("HTML2BBCode"),window.HTML2BBCode=c}(),cc._RF.pop()},{}],dateUtils:[function(t,e,i){"use strict";cc._RF.push(e,"bceb3PSUcpD7LLXtJPnJ0l0","dateUtils");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTime=function(){return(new Date).getTime()},e.prototype.getFormatBySecond=function(t){void 0===t&&(t=0),t<0&&(t=0);var e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),n=Math.floor((t-3600*e)%60);return(0==i?"00":i<10?"0"+i:""+i)+":"+(0==n?"00":n<10?"0"+n:""+n)},e.prototype.getDay=function(t){return new Date(t).getDay()},e.prototype.isSameDate=function(t,e){var i=new Date(t),n=new Date(e);return i.getFullYear()==n.getFullYear()&&i.getMonth()==n.getMonth()&&i.getDate()==n.getDate()},e.prototype.format=function(t,e){void 0===e&&(e="yyyy-MM-dd hh:mm:ss");var i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return e},e.prototype.dateDifference=function(t,e){var i=Math.abs(e-t);return Math.ceil(i/864e5)},e}(t("../base/singtonClass").default);i.default=r,cc._RF.pop()},{"../base/singtonClass":"singtonClass"}],encodeUtils:[function(t,e,i){"use strict";cc._RF.push(e,"f86ceHjEAZGs4xxZ5IaQVRM","encodeUtils");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.aesDecrypt=function(t){var e="0FldOs9PhBZqzEMK",i="DFBZpId059PhEMoK";e=CryptoJS.enc.Utf8.parse(e),i=CryptoJS.enc.Utf8.parse(i);var n=t,o=CryptoJS.AES.decrypt(n,e,{iv:i,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString(CryptoJS.enc.Utf8);return JSON.parse(o)},e}(t("../base/singtonClass").default);i.default=r,cc._RF.pop()},{"../base/singtonClass":"singtonClass"}],eventNameUtils:[function(t,e,i){"use strict";cc._RF.push(e,"07d5bhNCchAlYAH+GuBaRQ1","eventNameUtils");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.OPEN_VIEW=Symbol(),e.CLOSE_VIEW=Symbol(),e.TOAST=Symbol(),e.OPEN_VIEW_AND_RUN_FUNC=Symbol(),e.SHOW_WAIT=Symbol(),e.HIDE_WAIT=Symbol(),e.COMPLETE_LOGIN=Symbol(),e.addStep=Symbol(),e.event_view08_addScore=Symbol(),e.event_view08_gameEnd=Symbol(),e.event_view10_addScore=Symbol(),e.event_view10_gameEnd=Symbol(),e.event_addScore=Symbol(),e.event_gameEnd=Symbol(),e}return o(e,t),e}(t("../base/singtonClass").default);i.default=r,cc._RF.pop()},{"../base/singtonClass":"singtonClass"}],eventObjUtils:[function(t,e,i){"use strict";cc._RF.push(e,"67acdzvpLdAE6XQvpMbPDcE","eventObjUtils");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../app"),s=t("../base/singtonClass"),c=t("../gameEnum"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.openView=function(t,e){var i;void 0===t&&(t=c.default.view.TOAST_VIEW),void 0===e&&(e=c.default.layer.WINDOW_LAYER);for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];(i=a.default.event).emit.apply(i,r([a.default.eName.OPEN_VIEW,t,e],n))},e.prototype.openViewAsync=function(t,e,i){var n;void 0===t&&(t=c.default.view.TOAST_VIEW),void 0===e&&(e=c.default.layer.WINDOW_LAYER),void 0===i&&(i=null);for(var o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];(n=a.default.event).emit.apply(n,r([a.default.eName.OPEN_VIEW_AND_RUN_FUNC,t,e,i],o))},e.prototype.closeView=function(t){void 0===t&&(t=c.default.view.TOAST_VIEW),a.default.event.emit(a.default.eName.CLOSE_VIEW,t)},e.prototype.toast=function(t,e){void 0===e&&(e=2),t?a.default.event.emit(a.default.eName.TOAST,t,e):console.error("msg is null",t)},e.prototype.showWait=function(){},e.prototype.hideWait=function(){},e.prototype.showViewWait=function(){a.default.event.emit(a.default.eName.SHOW_WAIT)},e.prototype.hideViewWait=function(){a.default.event.emit(a.default.eName.HIDE_WAIT)},e.prototype.loginSuccess=function(){a.default.event.emit(a.default.eName.COMPLETE_LOGIN,!0)},e.prototype.loginFail=function(){a.default.event.emit(a.default.eName.COMPLETE_LOGIN,!1)},e}(s.default);i.default=l,cc._RF.pop()},{"../app":"app","../base/singtonClass":"singtonClass","../gameEnum":"gameEnum"}],eventUtils:[function(t,e,i){"use strict";cc._RF.push(e,"3daf2SY2mBOZpS8aCITmWUH","eventUtils");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(i,"__esModule",{value:!0});var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._allEventInfo=new Map,e._allContextInfo=new Map,e}return o(e,t),e.prototype.on=function(t,e,i){"function"==typeof e?(this._allContextInfo.has(i)||this._allContextInfo.set(i,[]),this._allContextInfo.get(i).push(t),this._allEventInfo.has(t)||this._allEventInfo.set(t,new Map),this._allEventInfo.get(t).set(i,{handler:e,context:i})):console.error("\u6ca1\u6709\u4e8b\u4ef6\u54cd\u5e94\u51fd\u6570\uff01")},e.prototype.once=function(t,e,i){var n=this;this.on(t,function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];e.call.apply(e,r([i],o)),n.off(t,i)},i)},e.prototype.onByArray=function(t,e){for(var i=0,n=t;i<n.length;i++){var o=n[i];this.on(o,e[o],e)}},e.prototype.onByArrayAndCall=function(t,e){for(var i=0,n=t;i<n.length;i++){var o=n[i],r=e[o];this.on(o,r,e),r.call(e,!0)}},e.prototype.off=function(t,e){this._allEventInfo.has(t)||console.warn("\u4e8b\u4ef6\u5df2\u7ecf\u5173\u95ed\u76d1\u542c\u6216\u4ece\u672a\u5f00\u59cb\u76d1\u542c\uff01"),this._allEventInfo.get(t).delete(e)},e.prototype.offAll=function(t){this._allContextInfo.has(t);var e=this._allContextInfo.get(t);if(Array.isArray(e))for(var i=0,n=e;i<n.length;i++){var o=n[i];this.off(o,t)}this._allContextInfo.delete(t)},e.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this._allEventInfo.get(t);n&&n.forEach(function(t){var i;return(i=t.handler).call.apply(i,r([t.context],e))})},e}(t("../base/singtonClass").default);i.default=a,cc._RF.pop()},{"../base/singtonClass":"singtonClass"}],gameEnum:[function(t,e,i){"use strict";var n,o,r,a;cc._RF.push(e,"68a0bqjIu5Pkqhk+9Wzc/YU","gameEnum"),Object.defineProperty(i,"__esModule",{value:!0}),function(t){t.NODE="None",t.HomeScene="HomeScene",t.DemoView="DemoView",t.ID01_View="ID01_View",t.ID02_View="ID02_View",t.ID03_View="ID03_View",t.ID04_View="ID04_View",t.ID05_View="ID05_View",t.ID06_View="ID06_View",t.ID07_View="ID07_View",t.ID08_View="ID08_View",t.ID09_View="ID09_View",t.ID10_View="ID10_View",t.ID11_View="ID11_View",t.ID12_View="ID12_View",t.ID13_View="ID13_View",t.ID14_View="ID14_View",t.ID15_View="ID15_View",t.ID16_View="ID16_View",t.ID17_View="ID17_View",t.ID18_View="ID18_View",t.ID19_View="ID19_View",t.ID20_View="ID20_View",t.ID21_View="ID21_View",t.ID22_View="ID22_View",t.ID23_View="ID23_View",t.ID24_View="ID24_View",t.ID25_View="ID25_View",t.ID26_View="ID26_View",t.ID27_View="ID27_View",t.ID28_View="ID28_View",t.ID30_View="ID30_View"}(n||(n={})),function(t){t[t.PrizeView=1]="PrizeView",t[t.PrizeInfoView=1]="PrizeInfoView"}(o||(o={})),function(t){t[t.NORMAL=1]="NORMAL",t[t.BG_SCALE=2]="BG_SCALE",t[t.WIDGET_BUTTOM_SHOW=3]="WIDGET_BUTTOM_SHOW",t[t.WIDGET_LEFT_SHOW=4]="WIDGET_LEFT_SHOW",t[t.BG_SCALE1=5]="BG_SCALE1",t[t.FADE_OUT=6]="FADE_OUT"}(r||(r={})),function(t){t.SCENE_LAYER="sceneLayer",t.WINDOW_LAYER="windowLayer",t.TOP_LAYER="topLayer",t.EFFECT_LAYER="effectLayer"}(a||(a={}));var s=function(){function t(){}return t.view=n,t.isRemoteView=o,t.layer=a,t.viewEffect=r,t}();i.default=s,cc._RF.pop()},{}],httpUtils:[function(t,e,i){"use strict";cc._RF.push(e,"94a64aUHbxDE6WdSaH5+7yF","httpUtils");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.CRequest=i.eHttpCode=void 0;var r,a=t("../app"),s=t("../base/singtonClass");(function(t){t[t.Invalid=-1]="Invalid",t[t.Success=0]="Success",t[t.Timeout=1]="Timeout",t[t.Error=2]="Error"})(r=i.eHttpCode||(i.eHttpCode={}));var c=function(){function t(){}return t.prototype.sendRequest=function(t,e,i,n,o,a){var s=new XMLHttpRequest;s.responseType="text";var c=function(){s.onreadystatechange=null,s.ontimeout=null,s.onerror=null,s.onabort=null};if(s.onreadystatechange=function(){if(4===s.readyState&&s.status>=200&&s.status<400){var t=r.Success,e=null,i=s.responseText;try{e=JSON.parse(i)}catch(a){t=r.Error,e={}}n&&o&&n.apply(o,[e,t]),c()}},s.ontimeout=function(){n&&o&&n.apply(o,[null,r.Timeout]),c()},s.onerror=function(){n&&o&&n.apply(o,[null,r.Error]),c()},s.onabort=function(){c()},s.open(t,e,!0),s.timeout=5e3,a)for(var l=0,u=Object.keys(a);l<u.length;l++){var p=u[l];s.setRequestHeader(p,a[p])}var h=document.getElementsByTagName("meta")["csrf-token"],d=document.getElementsByTagName("meta").Authorization;s.withCredentials=!0,s.xsrfCookieName="XSRF-TOKEN",s.xsrfHeaderName="X-XSRF-TOKEN",s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("X-CSRF-TOKEN",h?h.content:""),s.setRequestHeader("Authorization","Bearer "+(d?d.content:"")),s.setRequestHeader("Content-Type","application/json"),s.send(i)},t}();i.CRequest=c;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.map_request=new Map,e}return o(e,t),e.prototype.request=function(t,e,i,n,o,r){(new c).sendRequest(t,e,i,n,o,r)},e.prototype.get=function(t,e,i,n,o){if(e){-1==t.indexOf("?")&&(t+="?");for(var r="",a=Object.keys(e),s=0;s<a.length;++s)r+="&"+a[s]+"="+e[a[s]];t+=encodeURI(r)}this.request("GET",t,null,i,n,o)},e.prototype.post=function(t,e,i,n,o){this.request("POST",t,e,i,n,o)},e.prototype.asyncGet=function(t,e,i){var n=this;return new Promise(function(o){e&&(-1==t.indexOf("?")&&(t+="?"),t+=a.default.common.paramObjToString(e)),n.request("GET",t,null,function(t,e){o({resp:t,code:e})},n,i)})},e.prototype.asyncPost=function(t,e,i){var n=this;return e=JSON.stringify(e),new Promise(function(o){n.request("POST",encodeURI(t),e,function(t,e){o({resp:t,code:e})},n,i)})},e.prototype.getXHR=function(t){var e=cc.js.getClassName(t);if(0==this.map_request.has(e)){var i=new t;this.map_request.set(e,i)}return this.map_request.get(e)},e}(s.default);i.default=l,cc._RF.pop()},{"../app":"app","../base/singtonClass":"singtonClass"}],imgUrils:[function(t,e,i){"use strict";cc._RF.push(e,"3eec2oO1dVMuZ7FxSOGQWX2","imgUrils");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../base/singtonClass"),c=t("../app"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.camera=null,e.texture=null,e._canvas=null,e}return o(e,t),e.prototype.setBase64=function(t,e){t&&(t.spriteFrame=this.base64ToSpriteFrame(e))},e.prototype.base64ToSpriteFrame=function(t){var e=new Image;e.src=t;var i=new cc.Texture2D;return i.initWithElement(e),i.handleLoadedTexture(),new cc.SpriteFrame(i)},e.prototype.base64ToTexture2D=function(t,e){void 0===e&&(e=!0);var i=new Image;i.src=t;var n=new cc.Texture2D;return n.initWithElement(i),n.handleLoadedTexture(),0==e&&(n.packable=!1),n},e.prototype.ShapeTouch=function(t,e,i){return r(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){var o=new Image;o.onload=function(){var t=document.createElement("canvas").getContext("2d");t.drawImage(o,0,0);var r=t.getImageData(e,o.height-i,1,1).data[3];console.log("aaaaaaaa"),n({touch:r>0,alpha:r})},o.onerror=function(){console.log("aaaaaaaa"),n({touch:!1,alpha:0})},o.src=t})];case 1:return[2,n.sent()]}})})},e.prototype.captureNode=function(t){var e=new cc.Node;e.parent=cc.find("Canvas");var i=e.addComponent(cc.Camera),n=t.width,o=t.height,r=new cc.RenderTexture;r.initWithSize(cc.visibleRect.width,cc.visibleRect.height,cc.gfx.RB_FMT_S8),i.targetTexture=r;var a=document.createElement("canvas");a.width=n,a.height=o;var s=a.getContext("2d");i.render();for(var c=t.getContentSize(),l=new Uint8Array(c.width*c.height*4),u=r.width/2-t.width/2,p=r.height/2-t.height/2,h=t.width,d=t.height,f=r.readPixels(l,u,p,h,d),_=4*n,y=0;y<o;y++){for(var m=o-1-y,g=s.createImageData(n,1),v=m*n*4,w=0;w<_;w++)g.data[w]=f[v+w];s.putImageData(g,0,y)}var b=a.toDataURL("image/png"),I=document.createElement("img");I.src=b;var T=new cc.Texture2D;return T.initWithElement(I),(new cc.SpriteFrame).setTexture(T),b},e.prototype.renderNode=function(t){var e=new cc.Node;e.parent=cc.find("Canvas");var i=e.addComponent(cc.Camera),n=t.getPosition(),o=t.width,r=t.height;i.alignWithScreen=!1,i.ortho=!0,i.orthoSize=r/2;var a=new cc.RenderTexture;a.initWithSize(o,r,cc.gfx.RB_FMT_S8),i.targetTexture=a;var s=document.createElement("canvas");s.width=o,s.height=r;var c=s.getContext("2d");t.setPosition(cc.Vec2.ZERO),i.render(t),t.setPosition(n);for(var l=a.readPixels(),u=4*o,p=0;p<r;p++){for(var h=r-1-p,d=c.createImageData(o,1),f=h*o*4,_=0;_<u;_++)d.data[_]=l[f+_];c.putImageData(d,0,p)}return s.toDataURL("image/png")},e.prototype.createImg=function(t){var e=t.getPosition(),i=t.width,n=t.height,o=c.default.nodeTree.locateNode("CaptureCamera").getComponent(cc.Camera);o.backgroundColor=cc.Color.TRANSPARENT,o.clearFlags=cc.Camera.ClearFlags.DEPTH|cc.Camera.ClearFlags.STENCIL|cc.Camera.ClearFlags.COLOR,o.alignWithScreen=!1,o.orthoSize=n/2;var r=new cc.RenderTexture;r.initWithSize(i,n,cc.gfx.RB_FMT_S8),o.targetTexture=r,t.setPosition(cc.Vec2.ZERO),o.render(t),t.setPosition(e);var a=r.readPixels(),s=document.createElement("canvas"),l=s.getContext("2d");s.width=r.width,s.height=r.height;for(var u=4*i,p=0;p<n;p++){for(var h=n-1-p,d=l.createImageData(i,1),f=h*i*4,_=0;_<u;_++)d.data[_]=a[f+_];l.putImageData(d,0,p)}return s.toDataURL("image/png")},e.prototype.init=function(t){var e=new cc.RenderTexture;e.initWithSize(cc.visibleRect.width,cc.visibleRect.height,cc.gfx.RB_FMT_S8),this.camera=t.addComponent(cc.Camera),this.camera.targetTexture=e,this.texture=e},e.prototype.createImg1=function(t){return this.init(t),this.createCanvas(),this._canvas.toDataURL("image/png")},e.prototype.createCanvas=function(){var t=this.texture.width,e=this.texture.height;this._canvas?this.clearCanvas():(this._canvas=document.createElement("canvas"),this._canvas.width=t,this._canvas.height=e);var i=this._canvas.getContext("2d");this.camera.render();for(var n=this.texture.readPixels(),o=4*t,r=0;r<e;r++){for(var a=e-1-r,s=i.createImageData(t,1),c=a*t*4,l=0;l<o;l++)s.data[l]=n[c+l];i.putImageData(s,0,r)}return this._canvas},e.prototype.clearCanvas=function(){this._canvas.getContext("2d").clearRect(0,0,this._canvas.width,this._canvas.height)},e}(s.default);i.default=l,cc._RF.pop()},{"../app":"app","../base/singtonClass":"singtonClass"}],jsUrils:[function(t,e,i){"use strict";cc._RF.push(e,"cbd6bqUnNxD37rb2qxiXngo","jsUrils");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(i,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.shuffle=function(t){for(var e=r(t),i=t.length-1;i>0;i--){var n=Math.floor(Math.random()*(i+1)),o=e[n];e[n]=e[i],e[i]=o}return e},e.prototype.paramObjToString=function(t){var e="",i=[];if(t){for(var n in t)i.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));e=i.join("&")}return e},Object.defineProperty(e.prototype,"isAndroid",{get:function(){var t=navigator.userAgent,e=t.indexOf("Android")>-1||t.indexOf("Adr")>-1;return t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isiOS",{get:function(){var t=navigator.userAgent;return t.indexOf("Android")>-1||t.indexOf("Adr"),!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isWx",{get:function(){return!(-1==navigator.userAgent.toLowerCase().indexOf("micromessenger"))},enumerable:!1,configurable:!0}),e.prototype.copyProp=function(t,e){for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},e.prototype.copyToClipBoard=function(t){void 0===t&&(t="\u6587\u672c\u5185\u5bb9");var e=t,i=document.createElement("textarea");i.value=e,i.setAttribute("readonly",""),i.style.contain="strict",i.style.position="absolute",i.style.left="-9999px",i.style.fontSize="12pt";var n=getSelection(),o=null,r=!1;n.rangeCount>0&&(o=n.getRangeAt(0),r=!0),document.body.appendChild(i),i.select(),i.selectionStart=0,i.selectionEnd=e.length;var a=!1;try{a=document.execCommand("copy")}catch(s){}return document.body.removeChild(i),r&&(n.removeAllRanges(),n.addRange(o)),a},Object.defineProperty(e.prototype,"userAgent",{get:function(){return navigator.userAgent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uaVer",{get:function(){var t=navigator.userAgent,e="Win32"==navigator.platform||"Windows"==navigator.platform,i="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;if(i)return"Mac";if("X11"==navigator.platform&&!e&&!i)return"Unix";if(String(navigator.platform).indexOf("Linux")>-1)return"Linux";if(e){if(t.indexOf("Windows NT 5.0")>-1||t.indexOf("Windows 2000")>-1)return"Win2000";if(t.indexOf("Windows NT 5.1")>-1||t.indexOf("Windows XP")>-1)return"WinXP";if(t.indexOf("Windows NT 5.2")>-1||t.indexOf("Windows 2003")>-1)return"Win2003";if(t.indexOf("Windows NT 6.0")>-1||t.indexOf("Windows Vista")>-1)return"WinVista";if(t.indexOf("Windows NT 6.1")>-1||t.indexOf("Windows 7")>-1)return"Win7";if(t.indexOf("Windows NT 10")>-1||t.indexOf("Windows 10")>-1)return"Win10"}return"other"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"netType",{get:function(){var t,e=navigator.userAgent,i=e.match(/NetType\/\w+/)?e.match(/NetType\/\w+/)[0]:"NetType/other";switch(i=i.toLowerCase().replace("nettype/","")){case"wifi":t="wifi";break;case"4g":t="4g";break;case"3g":case"3gnet":t="3g";break;case"2g":t="2g";break;default:t="other"}return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return window.screen.width+" x "+window.screen.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){var t=navigator.userAgent;console.log(t);var e=new MobileDetect(t),i=e.os();console.log(i),console.log(e.mobile());var n="";if("iOS"==i)i=e.os()+e.version("iPhone"),n=e.mobile();else if("AndroidOS"==i){for(var o,r=t.split(";"),a=0;a<r.length;a++)if(r[a].indexOf("Build/")>0){o=a;break}o>-1&&(n=r[o].substring(0,r[o].indexOf("Build/")))}return n},enumerable:!1,configurable:!0}),e.prototype.htmlToBBCode=function(t){if(!t)return"";t=t.replace(/\n/g,"<br/>");var e=(new HTML2BBCode).feed(t).s,i=(e=e.replace(/\[/g,"<").replace(/\]/g,">")).match(/<.*?>/g);return e=e.replace(/<\/url>/g,"</on>"),i&&i.forEach(function(t){if(1==t.includes("url=")){var i=t.split("url=")[1].slice(0,-1);e=e.replace(t,'<on click="handler" param="'+i+'"">')}}),e},e}(t("../base/singtonClass").default);i.default=a,cc._RF.pop()},{"../base/singtonClass":"singtonClass"}],poolUtils:[function(t,e,i){"use strict";cc._RF.push(e,"f05c5atLP5HpKpu7ikHaHL0","poolUtils");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handle=new Map,e}return o(e,t),e.prototype.getNode=function(t,e){if(void 0===e&&(e=null),!t)return console.error("prefab is null"),null;var i=t.name,n=null;return(n=this.handle.has(i)&&this.handle.get(i).length>0?this.handle.get(i).shift():cc.instantiate(t))?(e&&n.setParent(e),n):null},e.prototype.setNode=function(t){var e=t.name;t.removeFromParent(),this.handle.has(e)?this.handle.get(e).push(t):this.handle.set(e,[t])},e}(t("../base/singtonClass").default);i.default=r,cc._RF.pop()},{"../base/singtonClass":"singtonClass"}],promiseUtils:[function(t,e,i){"use strict";cc._RF.push(e,"8abb091oEFG6ZqDoH1/Tq2H","promiseUtils");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.sleep=function(t,e){return r(this,void 0,void 0,function(){return a(this,function(){return[2,new Promise(function(i){e?e.scheduleOnce(i,t):setTimeout(i,1e3*t)})]})})},e.prototype.loadPrefab=function(t){return new Promise(function(e){cc.loader.loadRes(t,cc.Prefab,function(t,i){if(t)return cc.error(t),void e(null);e(i)})})},e.prototype.loadView=function(t,e){var i="ui/"+t;return new Promise(function(t){cc.resources.load(i,cc.Prefab,function(t,i){e&&e(t,i)},function(e,i){t(i)})})},e.prototype.loadSpriteFrame=function(t){return new Promise(function(e){cc.loader.loadRes(t,cc.SpriteFrame,function(t,i){if(t)return cc.error(t),void e(null);e(i)})})},e.prototype.loadUrlTexture=function(t,e){return new Promise(function(i){cc.assetManager.loadRemote(t,function(t,n){!t&&n instanceof cc.Texture2D?(e&&e(null,n),i(n)):(e&&e(t,null),i(null))})})},e}(t("../base/singtonClass").default);i.default=s,cc._RF.pop()},{"../base/singtonClass":"singtonClass"}],randomUtils:[function(t,e,i){"use strict";cc._RF.push(e,"6de2e37NvJFPoVWXlcn1/0X","randomUtils");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.limit=function(t,e){t=Math.min(t,e);var i=(e=Math.max(t,e))-t;return t+Math.random()*i},e.prototype.limitInteger=function(t,e){return Math.floor(this.limit(t,e+1))},e.prototype.rand=function(){return this.limitInteger(1,9)*(this.limitInteger(1,10)%2==0?1:-1)},e.prototype.randomArray=function(t){return t?t[Math.floor(Math.random()*t.length)]:null},e.prototype.randomArraySplitObj=function(t,e){if(!t)return null;var i=[];t.forEach(function(t){t!=e&&i.push(t)}),i.length<=0&&(i=t);var n=Math.floor(Math.random()*i.length);return i[n]},e.prototype.randomByWeight=function(t,e){if(t.length!=e.length)return console.warn("random2\u8f93\u5165\u4e0d\u5408\u6cd5: arr1.length != arr2.length"),null;for(var i=0,n=0,o=Math.random(),r=e.length-1;r>=0;r--)i+=e[r];for(o*=i,r=e.length-1;r>=0;r--)if(o<=(n+=e[r]))return t[r];return null},e}(t("../base/singtonClass").default);i.default=r,cc._RF.pop()},{"../base/singtonClass":"singtonClass"}],requestUtils:[function(t,e){"use strict";cc._RF.push(e,"6912fg3kxdEK4zCQM/qe/0T","requestUtils"),cc._RF.pop()},{}],singtonClass:[function(t,e,i){"use strict";cc._RF.push(e,"89723nnIqZPNIK9asqZIdYH","singtonClass");var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(){}return t.instance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;return i._instance||(i._instance=new(i.bind.apply(i,n([void 0],t)))),i._instance},t}();i.default=o,cc._RF.pop()},{}],storageUtil:[function(t,e,i){"use strict";cc._RF.push(e,"cccecB1zp1GCoJ9QWuVSM80","storageUtil");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.set=function(t,e){var i="object"==typeof e?JSON.stringify(e):e;window.localStorage.setItem(t,i)},e.prototype.get=function(t,e){void 0===e&&(e=!0);var i=window.localStorage.getItem(t);if(i){if(e)try{return JSON.parse(i)}catch(n){return i}return i}return null},e.prototype.remove=function(t){window.localStorage.removeItem(t)},e.prototype.getCookie=function(t){for(var e=document.cookie.split("; "),i=0;i<e.length;i++){var n=e[i].split("=");if(n[0]===t)return decodeURIComponent(n[1])}return null},e.prototype.setCookie=function(t,e,i,n,o,r){void 0===i&&(i=0);var a=encodeURIComponent(t)+"="+encodeURIComponent(e);if(i){var s=new Date;a+="; expires="+new Date(s.getTime()+864e5*i).toUTCString()}n&&(a+="; path="+n),o&&(a+="; domain="+o),r&&(a+="; secure"),document.cookie=a},Object.defineProperty(e.prototype,"cookie",{get:function(){return{getItem:function(t){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(t,e,i,n,o,r){if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;var a="";if(i)switch(i.constructor){case Number:a=i===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+i;break;case String:a="; expires="+i;break;case Date:a="; expires="+i.toUTCString()}return document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+a+(o?"; domain="+o:"")+(n?"; path="+n:"")+(r?"; secure":""),!0},removeItem:function(t,e,i){return!(!t||!this.hasItem(t)||(document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(i?"; domain="+i:"")+(e?"; path="+e:""),0))},hasItem:function(t){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(t).replace(/[-.+*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},get keys(){for(var t=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=0;e<t.length;e++)t[e]=decodeURIComponent(t[e]);return t}}},enumerable:!1,configurable:!0}),e}(t("../base/singtonClass").default);i.default=r,cc._RF.pop()},{"../base/singtonClass":"singtonClass"}],tweenUtils:[function(t,e,i){"use strict";cc._RF.push(e,"c2c3e8DaMlELaUE5Kl0sHJE","tweenUtils");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.labTween=function(t,e,i){void 0===i&&(i=.5);var n={a:Number(t.string)};cc.tween(n).to(i,{a:e},{progress:function(e,i,n,o){var r=e,a=i-r,s=Math.round(a*o+r);t&&(t.string=String(s))}}).start()},e.prototype.sharkTween=function(t,e){void 0===e&&(e=8.5),cc.Tween.stopAllByTarget(t),cc.tween(t).repeatForever(cc.tween().set({angle:0}).to(e,{angle:359})).start()},e.prototype.guideFingerTween=function(t){cc.Tween.stopAllByTarget(t),cc.tween(t).repeatForever(cc.tween().set({x:0,y:0,scale:1}).to(.8,{x:50,y:-50,scale:1.2}).to(.8,{x:0,y:0,scale:1})).start()},e.prototype.scaleShow=function(t){cc.Tween.stopAllByTarget(t),cc.tween(t).set({scale:.7}).to(.05,{scale:.9}).to(.05,{scale:.7}).call(function(){t.active=!0}).start()},e.prototype.scaleDelayShow=function(t,e){cc.Tween.stopAllByTarget(t),cc.tween(t).call(function(){t.active=!1}).delay(e).call(function(){t.active=!0}).set({scale:.7}).to(.05,{scale:.9}).to(.05,{scale:.7}).start()},e.prototype.stopAllByTarget=function(t){cc.Tween.stopAllByTarget(t)},e.prototype.scaleTween=function(t,e,i,n){void 0===n&&(n=.5),cc.Tween.stopAllByTarget(t),cc.tween(t).repeatForever(cc.tween().set({scale:i}).to(n,{scale:e}).to(n,{scale:i})).start()},e.prototype.floatTweenXY=function(t,e){void 0===e&&(e=.5),cc.Tween.stopAllByTarget(t),t.pauseAllActions();var i=cc.repeatForever(cc.sequence(cc.moveBy(e,-8,8),cc.moveBy(e,8,-8)));t.runAction(i)},e.prototype.floatTween=function(t,e){void 0===e&&(e=.8),cc.Tween.stopAllByTarget(t),cc.tween(t).repeatForever(cc.tween().set({y:0}).to(e,{y:40})).start()},e}(t("../base/singtonClass").default);i.default=r,cc._RF.pop()},{"../base/singtonClass":"singtonClass"}],"uiManagerUtils copy":[function(t,e){"use strict";cc._RF.push(e,"78a89kP1/ZF+5a5gghvTIz/","uiManagerUtils copy"),cc._RF.pop()},{}],uiManagerUtils:[function(t,e,i){"use strict";cc._RF.push(e,"5df9ckT2exG5adbLYUKG/2l","uiManagerUtils");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},s=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(i,"__esModule",{value:!0});var c=t("../app"),l=t("../base/singtonClass"),u=t("../gameEnum"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._dictPanel=new Map,e._dictComp=new Map,e._isLoading=new Map,e._bundleConfig=new Map,e._listIsShow=new Map,e}return o(e,t),e.prototype.init=function(){},e.prototype.show=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];t&&(this._listIsShow.set(t,!0),1!=this._dictPanel.has(t)&&(1!=this._isLoading.has(t)||1!=this._isLoading.get(t)?(this._isLoading.set(t,!0),c.default.eventObj.showViewWait(),1==u.default.isRemoteView[t]?this.loadPrefabForBundle.apply(this,s([t,e],i)):this.loadPrefab.apply(this,s([t,e],i))):console.log(t,"is load")))},e.prototype.loadPrefab=function(t,e){for(var i=this,n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r="ui/"+t;cc.resources.load(r,cc.Prefab,function(o,r){if(i._isLoading.set(t,!1),c.default.eventObj.hideViewWait(),o)return console.log(" === === === === === === === === === === === === === === === "),console.warn("\u672c\u5730\u52a0\u8f7dprefab\u5931\u8d25\uff1a",t),void console.log(" === === === === === === === === === === === === === === === ");i.showNode(!1,r,t,e,t,n)})},e.prototype.loadPrefabForBundle=function(t,e){for(var i=this,n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r="http://192.168.2.35:1688/bundle_ui",a="ui/"+t;cc.assetManager.loadBundle(r,function(o,s){if(o)return i._isLoading.set(t,!1),c.default.eventObj.hideViewWait(),void cc.error("Failed to load bundle: "+r);s.load(a,cc.Prefab,function(o,r){i._isLoading.set(t,!1),c.default.eventObj.hideViewWait(),o?cc.error("Failed to load prefab: "+o):i.showNode(!0,r,t,e,t,n)})})},e.prototype.showNode=function(t,e,i,n,o,c){return r(this,void 0,void 0,function(){var o;return a(this,function(){return this._listIsShow.has(i)&&0==this._listIsShow.get(i)?(console.log("\u6253\u5f00\u9875\u9762\u65f6 \u5728\u52a0\u8f7d\u8fc7\u7a0b\u4e2d \u8c03\u7528\u4e86hide"),[2]):(o=cc.instantiate(e),this._dictPanel.set(i,o),o.parent=c[0],this.showCallBack.apply(this,s([t,o,n,i],c)),[2])})})},e.prototype.showCallBack=function(t,e,i){for(var n,o,r=[],a=3;a<arguments.length;a++)r[a-3]=arguments[a];var c=r[0];if(c){var l=c.split("/"),u=l[l.length-1];if(u)if(1==t){var p=this._bundleConfig.get(c),h=e.getComponent(u);p?h.init(p.showComplete,p.hideComplete):h.init(null,null),h&&(null===(n=null==h?void 0:h.show)||void 0===n||n.call.apply(n,s([h],r))),i&&i(),this._dictComp.set(c,h)}else(h=e.getComponent(u))&&(null===(o=null==h?void 0:h.show)||void 0===o||o.call.apply(o,s([h],r))),i&&i(),this._dictComp.set(c,h);else console.error(r[0]+" getComponent is error")}},e.prototype.getView=function(t){return this._dictPanel.has(t)?this._dictPanel.get(t):null},e.prototype.getViewComp=function(t){return this._dictComp.has(t)?this._dictComp.get(t):null},e.prototype.hide=function(t,e){for(var i=this,n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this._listIsShow.set(t,!1),0!=this._dictPanel.has(t)){var r=t;if(r){var a=r.split("/"),s=a[a.length-1],c=this._dictPanel.get(t);if(e&&e(),c){var l=c.getComponent(s);l?(l.hide&&l.hide.call(l,n),l.hideEffect&&l.hideEffect.call(l,function(){i.panelDestroy(t,c,l)})):this.panelDestroy(t,c,l)}}}else"WaitView"!=t&&console.log("\u4e0d\u5b58\u5728:",t)},e.prototype.panelDestroy=function(t,e,i){e.removeFromParent(),i&&(null==i||i.off()),this._dictPanel.delete(t),e.destroyAllChildren(),e.destroy()},e.prototype.isShow=function(t){return!(!this._listIsShow.has(t)||1!=this._listIsShow.get(t))},e}(l.default);i.default=p,cc._RF.pop()},{"../app":"app","../base/singtonClass":"singtonClass","../gameEnum":"gameEnum"}],urlUtils:[function(t,e,i){"use strict";cc._RF.push(e,"d2cbb47IlhKdpFZV4jKTCP3","urlUtils");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.param=null,e}return o(e,t),Object.defineProperty(e.prototype,"searchParam",{get:function(){var t={};if(window.document.location){var e=decodeURIComponent(window.document.location.hash);if(e=e.split("#")[1])for(var i=e.split("&"),n=0;n<i.length;n++)t[i[n].split("=")[0]]=i[n].split("=")[1];var o=decodeURIComponent(window.document.location.search);if(o=o.split("?")[1])for(i=o.split("&"),n=0;n<i.length;n++)t[i[n].split("=")[0]]=i[n].split("=")[1]}return this.param=t,t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchHerf",{get:function(){var t={};if(window.document.location){var e=decodeURIComponent(window.location.href);if(e=e.split("?")[1])for(var i=e.split("&"),n=0;n<i.length;n++)t[i[n].split("=")[0]]=i[n].split("=")[1]}return t},enumerable:!1,configurable:!0}),e}(t("../base/singtonClass").default);i.default=r,cc._RF.pop()},{"../base/singtonClass":"singtonClass"}],viewMgr:[function(t,e,i){"use strict";cc._RF.push(e,"b8d39okk/FB6aEfy3e6O3Ah","viewMgr");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../app"),c=t("../gameEnum"),l=t("../ui/ModelTips"),u=cc._decorator,p=u.ccclass,h=u.property,d=u.executionOrder,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sceneLayer=null,e.effectLayer=null,e.windowLayer=null,e.waitLayer=null,e.topLayer=null,e.prefabToast=null,e.node_null=null,e.node_wait=null,e}return o(e,t),e.prototype.start=function(){s.default.event.on(s.default.eName.OPEN_VIEW,this.show,this),s.default.event.on(s.default.eName.OPEN_VIEW_AND_RUN_FUNC,this.showCallBack,this),s.default.event.on(s.default.eName.CLOSE_VIEW,this.hide,this),s.default.event.on(s.default.eName.TOAST,this.toast,this),s.default.event.on(s.default.eName.SHOW_WAIT,this.showWait,this),s.default.event.on(s.default.eName.HIDE_WAIT,this.hideWait,this),this.node_null.on(cc.Node.EventType.TOUCH_END,this._click,this),cc.tween(this.node_wait).repeatForever(cc.tween().set({angle:0}).to(3,{angle:359})).start(),this.waitLayer.active=!1},e.prototype.showWait=function(){this.waitLayer.active=!0},e.prototype.hideWait=function(){this.waitLayer.active=!1},e.prototype.onDestroy=function(){s.default.event.offAll(this),this.node_null.off(cc.Node.EventType.TOUCH_END,this._click,this),cc.Tween.stopAllByTarget(this.node_wait)},e.prototype._click=function(){},e.prototype.show=function(t,e){var i;void 0===t&&(t=c.default.view.TOAST_VIEW),void 0===e&&(e=c.default.layer.WINDOW_LAYER);for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r=this.node.getChildByName(e);r?(i=s.default.uiMgr).show.apply(i,a([t,null,r],n)):console.error("\u5c42\u7ea7\u4e0d\u5b58\u5728\uff1a",e)},e.prototype.showCallBack=function(t,e,i){var n;void 0===t&&(t=c.default.view.TOAST_VIEW),void 0===e&&(e=c.default.layer.WINDOW_LAYER);for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];var l=this.node.getChildByName(e);l?(n=s.default.uiMgr).show.apply(n,a([t,i,l],o)):console.error("\u5c42\u7ea7\u4e0d\u5b58\u5728\uff1a",e)},e.prototype.hide=function(t){void 0===t&&(t=c.default.view.TOAST_VIEW),s.default.uiMgr.hide(t)},e.prototype.toast=function(t,e,i){if(void 0===e&&(e=.5),void 0===i&&(i=3),!(i<=0)){var n=s.default.pool.getNode(this.prefabToast);if(n)this.effectLayer.addChild(n),n.setPosition(cc.v3(0,160,0)),n.getComponent(l.default).setData(t),cc.tween(n).to(.1,{opacity:255}).delay(e).to(.15,{opacity:0}).call(function(){s.default.pool.setNode(n)}).start();else{var o=i-1;s.default.event.emit(s.default.eName.TOAST,t,e,o)}}},r([h(cc.Node)],e.prototype,"sceneLayer",void 0),r([h(cc.Node)],e.prototype,"effectLayer",void 0),r([h(cc.Node)],e.prototype,"windowLayer",void 0),r([h(cc.Node)],e.prototype,"waitLayer",void 0),r([h(cc.Node)],e.prototype,"topLayer",void 0),r([h(cc.Prefab)],e.prototype,"prefabToast",void 0),r([h(cc.Node)],e.prototype,"node_null",void 0),r([h(cc.Node)],e.prototype,"node_wait",void 0),r([p,d(-300)],e)}(cc.Component);i.default=f,cc._RF.pop()},{"../app":"app","../gameEnum":"gameEnum","../ui/ModelTips":"ModelTips"}]},{},["Data","Fruit","HomeView","app","BaseListItem","BaseListView","BaseUrl","BaseView","singtonClass","gameEnum","bbcode","viewMgr","List","ListItem","ModelTips","dateUtils","encodeUtils","eventNameUtils","eventObjUtils","eventUtils","httpUtils","imgUrils","jsUrils","poolUtils","promiseUtils","randomUtils","requestUtils","storageUtil","tweenUtils","uiManagerUtils copy","uiManagerUtils","urlUtils"]);